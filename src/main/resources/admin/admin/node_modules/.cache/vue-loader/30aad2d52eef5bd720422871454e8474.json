{"remainingRequest":"D:\\软件工程\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\软件工程\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\src\\views\\weiguiRecord.vue?vue&type=style&index=0&id=1dbda90b&scoped=true&lang=css","dependencies":[{"path":"D:\\软件工程\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\src\\views\\weiguiRecord.vue","mtime":1765816407775},{"path":"D:\\软件工程\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\软件工程\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\软件工程\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\软件工程\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\软件工程\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQovKiDmlbTkvZPlrrnlmajvvJrmn5Tlkozog4zmma8gKyDlhoXovrnot50gKi8NCi52aW9sYXRpb24tY29udGFpbmVyIHsNCiAgcGFkZGluZzogMjBweDsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2Y5ZjlmOTsNCiAgbWluLWhlaWdodDogY2FsYygxMDB2aCAtIDgwcHgpOw0KfQ0KDQovKiDpobbpg6jmk43kvZzmoI/vvJrpnaLljIXlsZEgKyDmlrDlop7mjInpkq4g5biD5bGAICovDQoudG9wLWJhciB7DQogIGRpc3BsYXk6IGZsZXg7DQogIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCiAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgbWFyZ2luLWJvdHRvbTogMjBweDsNCn0NCi5icmVhZGNydW1iIHsNCiAgZm9udC1zaXplOiAxNHB4Ow0KICBjb2xvcjogIzY2NjsNCn0NCi5hZGQtYnRuIHsNCiAgcGFkZGluZzogOHB4IDE2cHg7DQp9DQoNCi8qIOaQnOe0ouWNoeeJh++8mua1hemYtOW9seaPkOWNh+WxguasoeaEnyAqLw0KLnNlYXJjaC1jYXJkIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsNCiAgcGFkZGluZzogMTVweDsNCn0NCg0KLyog6KGo5qC85Y2h54mH77ya57uf5LiA5a655Zmo5qC35byPICovDQoudGFibGUtY2FyZCB7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQp9DQoNCi8qIOWIhumhteWMuuWfn++8muWPs+Wvuem9kO+8jOS4juihqOagvOW6lemDqOS/neaMgemXtOi3nSAqLw0KLnBhZ2luYXRpb24gew0KICBtYXJnaW4tdG9wOiAyMHB4Ow0KICB0ZXh0LWFsaWduOiByaWdodDsNCn0NCg0KLyog5Yig6Zmk5oyJ6ZKu77ya5paH5a2X5qC35byP5pu05p+U5ZKMICovDQouZGVsZXRlLWJ0biB7DQogIGNvbG9yOiAjZmY0ZDRmOw0KfQ0KDQovKiDmlrDlop7ooajljZXvvJrntKflh5HluIPlsYAgKi8NCi5hZGQtZm9ybSB7DQogIG1hcmdpbi10b3A6IDEwcHg7DQp9DQo="},{"version":3,"sources":["weiguiRecord.vue"],"names":[],"mappings":";AA+TA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"weiguiRecord.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"violation-container\">\r\n    <!-- 顶部操作栏：面包屑 + 新增按钮 -->\r\n    <div class=\"top-bar\">\r\n      <el-breadcrumb separator=\"/\" class=\"breadcrumb\">\r\n        <el-breadcrumb-item><a href=\"#/index\">系统首页</a></el-breadcrumb-item>\r\n        <el-breadcrumb-item>违规记录管理</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n      <el-button\r\n        type=\"primary\"\r\n        icon=\"el-icon-plus\"\r\n        @click=\"openAddDialog\"\r\n        class=\"add-btn\"\r\n      >\r\n        新增违规记录\r\n      </el-button>\r\n    </div>\r\n\r\n    <!-- 搜索区域：卡片式布局，提升层次感 -->\r\n    <el-card shadow=\"hover\" class=\"search-card\">\r\n      <el-form inline :model=\"searchForm\" @submit.prevent>\r\n        <el-form-item label=\"学号\">\r\n          <el-input\r\n            v-model=\"searchForm.xuehao\"\r\n            placeholder=\"请输入学号搜索\"\r\n            style=\"width: 180px;\"\r\n            clearable\r\n            @input=\"filterList\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"违规类型\">\r\n          <el-select\r\n            v-model=\"searchForm.weiguiLeixing\"\r\n            placeholder=\"全部\"\r\n            style=\"width: 150px;\"\r\n            clearable\r\n            @change=\"filterList\"\r\n          >\r\n            <el-option label=\"全部\" value=\"\" />\r\n            <el-option label=\"教室乱吃乱喝\" value=\"chifan\" />\r\n            <el-option label=\"未签到\" value=\"weiqiandao\" />\r\n            <el-option label=\"大声喧哗\" value=\"xuanhua\" />\r\n            <el-option label=\"随地大小便\" value=\"suibiaobian\" />\r\n            <el-option label=\"其他\" value=\"other\" />\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button\r\n            type=\"success\"\r\n            icon=\"el-icon-search\"\r\n            @click=\"filterList\"\r\n          >\r\n            查询\r\n          </el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-card>\r\n\r\n    <!-- 数据表格：简洁清晰，空状态友好提示 -->\r\n    <el-card shadow=\"hover\" class=\"table-card\" style=\"margin-top: 20px;\">\r\n      <el-table\r\n        :data=\"showList\"\r\n        border\r\n        stripe\r\n        style=\"width: 100%;\"\r\n        empty-text=\"暂无违规记录，点击“新增违规记录”创建第一条记录吧～\"\r\n      >\r\n        <el-table-column prop=\"xuehao\" label=\"学号\" align=\"center\" min-width=\"100\" />\r\n        <el-table-column prop=\"xingming\" label=\"姓名\" align=\"center\" min-width=\"80\" />\r\n        <el-table-column prop=\"weiguiLeixingName\" label=\"违规类型\" align=\"center\" min-width=\"120\" />\r\n        <el-table-column prop=\"weiguiShijian\" label=\"违规时间\" align=\"center\" min-width=\"180\" />\r\n        <el-table-column prop=\"zixishimingcheng\" label=\"违规自习室\" align=\"center\" min-width=\"120\" />\r\n        <el-table-column prop=\"weiguiBeizhu\" label=\"违规详情\" align=\"center\" min-width=\"200\" />\r\n        <el-table-column label=\"操作\" align=\"center\" min-width=\"80\">\r\n          <template #default=\"scope\">\r\n            <el-button\r\n              type=\"danger\"\r\n              size=\"mini\"\r\n              icon=\"el-icon-delete\"\r\n              @click=\"deleteWeigui(scope.row.id)\"\r\n              type=\"text\"\r\n              class=\"delete-btn\"\r\n            >删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 分页：仅在有数据时显示 -->\r\n      <div class=\"pagination\" v-if=\"total > 0\">\r\n        <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"currentPage\"\r\n          :page-sizes=\"[10, 20, 30]\"\r\n          :page-size=\"pageSize\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"total\"\r\n          background\r\n        />\r\n      </div>\r\n    </el-card>\r\n\r\n    <!-- 新增弹窗：简洁明了，交互友好 -->\r\n    <el-dialog\r\n      title=\"新增违规记录\"\r\n      v-model=\"addDialogVisible\"\r\n      width=\"50%\"\r\n      center\r\n      :close-on-click-modal=\"false\"\r\n    >\r\n      <el-form\r\n        ref=\"addForm\"\r\n        :model=\"addForm\"\r\n        label-width=\"120px\"\r\n        :rules=\"addRules\"\r\n        class=\"add-form\"\r\n      >\r\n        <el-form-item label=\"学号\" prop=\"xuehao\">\r\n          <el-input v-model=\"addForm.xuehao\" placeholder=\"请输入学生学号\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"姓名\" prop=\"xingming\">\r\n          <el-input v-model=\"addForm.xingming\" placeholder=\"请输入学生姓名\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"违规类型\" prop=\"weiguiLeixing\">\r\n          <el-select v-model=\"addForm.weiguiLeixing\" placeholder=\"选择违规类型\" @change=\"handleLeixingChange\">\r\n            <el-option label=\"教室乱吃乱喝\" value=\"chifan\" />\r\n            <el-option label=\"未签到\" value=\"weiqiandao\" />\r\n            <el-option label=\"大声喧哗\" value=\"xuanhua\" />\r\n            <el-option label=\"随地大小便\" value=\"suibiaobian\" />\r\n            <el-option label=\"其他\" value=\"other\" />\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"违规类型名称\" v-if=\"addForm.weiguiLeixing === 'other'\" prop=\"weiguiLeixingName\">\r\n          <el-input v-model=\"addForm.weiguiLeixingName\" placeholder=\"输入其他违规类型名称\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"违规时间\" prop=\"weiguiShijian\">\r\n          <el-date-picker\r\n            v-model=\"addForm.weiguiShijian\"\r\n            type=\"datetime\"\r\n            placeholder=\"选择违规时间\"\r\n            style=\"width: 100%;\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"违规自习室\" prop=\"zixishimingcheng\">\r\n          <el-input v-model=\"addForm.zixishimingcheng\" placeholder=\"输入违规自习室名称\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"违规详情\" prop=\"weiguiBeizhu\">\r\n          <el-input\r\n            v-model=\"addForm.weiguiBeizhu\"\r\n            type=\"textarea\"\r\n            placeholder=\"输入违规详情（如：在自习室食用泡面）\"\r\n            rows=\"3\"\r\n          />\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <el-button @click=\"addDialogVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitAddForm\">确定</el-button>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'WeiguiRecord',\r\n  data() {\r\n    return {\r\n      searchForm: {\r\n        xuehao: '',\r\n        weiguiLeixing: ''\r\n      },\r\n      // 模拟原始数据\r\n      weiguiList: [\r\n        {\r\n          id: 1,\r\n          xuehao: '2024001',\r\n          xingming: '张三',\r\n          weiguiLeixing: 'chifan',\r\n          weiguiLeixingName: '教室乱吃乱喝',\r\n          weiguiShijian: '2025-12-01 14:30:00',\r\n          zixishimingcheng: '1号自习室',\r\n          weiguiBeizhu: '在自习室食用泡面，影响他人学习'\r\n        },\r\n        {\r\n          id: 2,\r\n          xuehao: '2024002',\r\n          xingming: '李四',\r\n          weiguiLeixing: 'xuanhua',\r\n          weiguiLeixingName: '大声喧哗',\r\n          weiguiShijian: '2025-12-02 10:15:00',\r\n          zixishimingcheng: '2号自习室',\r\n          weiguiBeizhu: '接打电话声音过大，多次提醒无效'\r\n        }\r\n      ],\r\n      // 展示列表（用于分页和筛选）\r\n      showList: [],\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      total: 0,\r\n      addDialogVisible: false,\r\n      addForm: {\r\n        xuehao: '',\r\n        xingming: '',\r\n        weiguiLeixing: '',\r\n        weiguiLeixingName: '',\r\n        weiguiShijian: '',\r\n        zixishimingcheng: '',\r\n        weiguiBeizhu: ''\r\n      },\r\n      addRules: {\r\n        xuehao: [{ required: true, message: '请输入学号', trigger: 'blur' }],\r\n        xingming: [{ required: true, message: '请输入姓名', trigger: 'blur' }],\r\n        weiguiLeixing: [{ required: true, message: '请选择违规类型', trigger: 'change' }],\r\n        weiguiShijian: [{ required: true, message: '请选择违规时间', trigger: 'change' }]\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    // 初始化展示列表\r\n    this.filterList()\r\n  },\r\n  methods: {\r\n    // 筛选列表（替代接口请求）\r\n    filterList() {\r\n      // 1. 筛选逻辑\r\n      let filtered = [...this.weiguiList]\r\n      if (this.searchForm.xuehao) {\r\n        filtered = filtered.filter(item => item.xuehao.includes(this.searchForm.xuehao))\r\n      }\r\n      if (this.searchForm.weiguiLeixing) {\r\n        filtered = filtered.filter(item => item.weiguiLeixing === this.searchForm.weiguiLeixing)\r\n      }\r\n\r\n      // 2. 分页逻辑\r\n      this.total = filtered.length\r\n      const start = (this.currentPage - 1) * this.pageSize\r\n      const end = start + this.pageSize\r\n      this.showList = filtered.slice(start, end)\r\n    },\r\n    // 分页-每页条数改变\r\n    handleSizeChange(val) {\r\n      this.pageSize = val\r\n      this.filterList()\r\n    },\r\n    // 分页-当前页改变\r\n    handleCurrentChange(val) {\r\n      this.currentPage = val\r\n      this.filterList()\r\n    },\r\n    // 打开新增弹窗\r\n    openAddDialog() {\r\n      this.addForm = {\r\n        xuehao: '',\r\n        xingming: '',\r\n        weiguiLeixing: '',\r\n        weiguiLeixingName: '',\r\n        weiguiShijian: '',\r\n        zixishimingcheng: '',\r\n        weiguiBeizhu: ''\r\n      }\r\n      this.addDialogVisible = true\r\n    },\r\n    // 违规类型切换\r\n    handleLeixingChange(val) {\r\n      const typeMap = {\r\n        chifan: '教室乱吃乱喝',\r\n        weiqiandao: '未签到',\r\n        xuanhua: '大声喧哗',\r\n        suibiaobian: '随地大小便'\r\n      }\r\n      this.addForm.weiguiLeixingName = typeMap[val] || ''\r\n    },\r\n    // 提交新增表单\r\n    submitAddForm() {\r\n      this.$refs.addForm.validate((valid) => {\r\n        if (valid) {\r\n          // 生成唯一ID\r\n          const newId = Math.max(...this.weiguiList.map(item => item.id)) + 1\r\n          // 组装新数据\r\n          const newItem = {\r\n            id: newId,\r\n            xuehao: this.addForm.xuehao,\r\n            xingming: this.addForm.xingming,\r\n            weiguiLeixing: this.addForm.weiguiLeixing,\r\n            weiguiLeixingName: this.addForm.weiguiLeixingName,\r\n            weiguiShijian: this.addForm.weiguiShijian,\r\n            zixishimingcheng: this.addForm.zixishimingcheng,\r\n            weiguiBeizhu: this.addForm.weiguiBeizhu\r\n          }\r\n          // 添加到原始列表\r\n          this.weiguiList.push(newItem)\r\n          // 刷新展示列表\r\n          this.filterList()\r\n          // 关闭弹窗+提示\r\n          this.addDialogVisible = false\r\n          this.$message.success('新增违规记录成功')\r\n        }\r\n      })\r\n    },\r\n    // 删除违规记录\r\n    deleteWeigui(id) {\r\n      this.$confirm('是否删除该违规记录?', '提示', {\r\n        type: 'warning'\r\n      }).then(() => {\r\n        // 过滤掉删除的项\r\n        this.weiguiList = this.weiguiList.filter(item => item.id !== id)\r\n        // 刷新展示列表\r\n        this.filterList()\r\n        this.$message.success('删除成功!')\r\n      }).catch(() => {\r\n        this.$message.info('已取消删除')\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* 整体容器：柔和背景 + 内边距 */\r\n.violation-container {\r\n  padding: 20px;\r\n  background-color: #f9f9f9;\r\n  min-height: calc(100vh - 80px);\r\n}\r\n\r\n/* 顶部操作栏：面包屑 + 新增按钮 布局 */\r\n.top-bar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n.breadcrumb {\r\n  font-size: 14px;\r\n  color: #666;\r\n}\r\n.add-btn {\r\n  padding: 8px 16px;\r\n}\r\n\r\n/* 搜索卡片：浅阴影提升层次感 */\r\n.search-card {\r\n  background-color: #fff;\r\n  padding: 15px;\r\n}\r\n\r\n/* 表格卡片：统一容器样式 */\r\n.table-card {\r\n  background-color: #fff;\r\n}\r\n\r\n/* 分页区域：右对齐，与表格底部保持间距 */\r\n.pagination {\r\n  margin-top: 20px;\r\n  text-align: right;\r\n}\r\n\r\n/* 删除按钮：文字样式更柔和 */\r\n.delete-btn {\r\n  color: #ff4d4f;\r\n}\r\n\r\n/* 新增表单：紧凑布局 */\r\n.add-form {\r\n  margin-top: 10px;\r\n}\r\n</style>"]}]}