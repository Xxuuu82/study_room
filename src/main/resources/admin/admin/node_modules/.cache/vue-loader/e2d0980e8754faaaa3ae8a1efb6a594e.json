{"remainingRequest":"D:\\3\\软件工程\\项目\\study_room\\src\\main\\resources\\admin\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\3\\软件工程\\项目\\study_room\\src\\main\\resources\\admin\\admin\\src\\views\\modules\\qiantuixinxi\\add-or-update.vue?vue&type=style&index=0&id=59c0cc36&lang=scss&scoped=true","dependencies":[{"path":"D:\\3\\软件工程\\项目\\study_room\\src\\main\\resources\\admin\\admin\\src\\views\\modules\\qiantuixinxi\\add-or-update.vue","mtime":1744342828000},{"path":"D:\\3\\软件工程\\项目\\study_room\\src\\main\\resources\\admin\\admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\3\\软件工程\\项目\\study_room\\src\\main\\resources\\admin\\admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\3\\软件工程\\项目\\study_room\\src\\main\\resources\\admin\\admin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\3\\软件工程\\项目\\study_room\\src\\main\\resources\\admin\\admin\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\3\\软件工程\\项目\\study_room\\src\\main\\resources\\admin\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\3\\软件工程\\项目\\study_room\\src\\main\\resources\\admin\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5hbWFwLXdyYXBwZXIgewogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogNTAwcHg7Cn0KCi5zZWFyY2gtYm94IHsKICBwb3NpdGlvbjogYWJzb2x1dGU7Cn0KCi5lbC1kYXRlLWVkaXRvci5lbC1pbnB1dCB7CiAgd2lkdGg6IGF1dG87Cn0KCi5hZGQtdXBkYXRlLXByZXZpZXcgLmVsLWZvcm0taXRlbSA+Pj4gLmVsLWZvcm0taXRlbV9fbGFiZWwgewogIHBhZGRpbmc6IDAgMTBweCAwIDA7CiAgY29sb3I6ICM2NjY7CiAgZm9udC13ZWlnaHQ6IDUwMDsKICB3aWR0aDogMTAwcHg7CiAgZm9udC1zaXplOiAxNHB4OwogIGxpbmUtaGVpZ2h0OiA0MHB4OwogIHRleHQtYWxpZ246IHJpZ2h0Owp9CgouYWRkLXVwZGF0ZS1wcmV2aWV3IC5lbC1mb3JtLWl0ZW0gPj4+IC5lbC1mb3JtLWl0ZW1fX2NvbnRlbnQgewogIG1hcmdpbi1sZWZ0OiAxMDBweDsKfQoKLmFkZC11cGRhdGUtcHJldmlldyAuZWwtaW5wdXQgPj4+IC5lbC1pbnB1dF9faW5uZXIgewogIGJvcmRlcjogMnB4IHNvbGlkICM3OTc5Nzk7CiAgYm9yZGVyLXJhZGl1czogMDsKICBwYWRkaW5nOiAwIDEycHg7CiAgYm94LXNoYWRvdzogMCAwIDBweCByZ2JhKDY0LCAxNTgsIDI1NSwgMC41KTsKICBvdXRsaW5lOiBub25lOwogIGNvbG9yOiAjMDAwOwogIHdpZHRoOiA0MDBweDsKICBmb250LXNpemU6IDE0cHg7CiAgaGVpZ2h0OiA0MHB4Owp9CgouYWRkLXVwZGF0ZS1wcmV2aWV3IC5lbC1zZWxlY3QgPj4+IC5lbC1pbnB1dF9faW5uZXIgewogIGJvcmRlcjogMnB4IHNvbGlkICM3OTc5Nzk7CiAgYm9yZGVyLXJhZGl1czogMDsKICBwYWRkaW5nOiAwIDEwcHg7CiAgYm94LXNoYWRvdzogMCAwIDBweCByZ2JhKDY0LCAxNTgsIDI1NSwgMC41KTsKICBvdXRsaW5lOiBub25lOwogIGNvbG9yOiAjMDAwOwogIHdpZHRoOiAyMDBweDsKICBmb250LXNpemU6IDE0cHg7CiAgaGVpZ2h0OiA0MHB4Owp9CgouYWRkLXVwZGF0ZS1wcmV2aWV3IC5lbC1kYXRlLWVkaXRvciA+Pj4gLmVsLWlucHV0X19pbm5lciB7CiAgYm9yZGVyOiAycHggc29saWQgIzc5Nzk3OTsKICBib3JkZXItcmFkaXVzOiAwOwogIHBhZGRpbmc6IDAgMTBweCAwIDMwcHg7CiAgYm94LXNoYWRvdzogMCAwIDBweCByZ2JhKDY0LCAxNTgsIDI1NSwgMC41KTsKICBvdXRsaW5lOiBub25lOwogIGNvbG9yOiAjMDAwOwogIHdpZHRoOiAyMDBweDsKICBmb250LXNpemU6IDE0cHg7CiAgaGVpZ2h0OiA0MHB4Owp9CgouYWRkLXVwZGF0ZS1wcmV2aWV3ID4+PiAuZWwtdXBsb2FkLS1waWN0dXJlLWNhcmQgewogIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OwogIGJvcmRlcjogMDsKICBib3JkZXItcmFkaXVzOiAwOwogIHdpZHRoOiBhdXRvOwogIGhlaWdodDogYXV0bzsKICBsaW5lLWhlaWdodDogaW5pdGlhbDsKICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwp9CgouYWRkLXVwZGF0ZS1wcmV2aWV3ID4+PiAudXBsb2FkIC51cGxvYWQtaW1nIHsKICBib3JkZXI6IDFweCBkYXNoZWQgIzc5Nzk3OTsKICBjdXJzb3I6IHBvaW50ZXI7CiAgYm9yZGVyLXJhZGl1czogNnB4OwogIGNvbG9yOiAjNzk3OTc5OwogIHdpZHRoOiA5MHB4OwogIGZvbnQtc2l6ZTogMzJweDsKICBsaW5lLWhlaWdodDogOTBweDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgaGVpZ2h0OiA5MHB4Owp9CgouYWRkLXVwZGF0ZS1wcmV2aWV3ID4+PiAuZWwtdXBsb2FkLWxpc3QgLmVsLXVwbG9hZC1saXN0X19pdGVtIHsKICBib3JkZXI6IDFweCBkYXNoZWQgIzc5Nzk3OTsKICBjdXJzb3I6IHBvaW50ZXI7CiAgYm9yZGVyLXJhZGl1czogNnB4OwogIGNvbG9yOiAjNzk3OTc5OwogIHdpZHRoOiA5MHB4OwogIGZvbnQtc2l6ZTogMzJweDsKICBsaW5lLWhlaWdodDogOTBweDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgaGVpZ2h0OiA5MHB4Owp9CgouYWRkLXVwZGF0ZS1wcmV2aWV3ID4+PiAuZWwtdXBsb2FkIC5lbC1pY29uLXBsdXMgewogIGJvcmRlcjogMXB4IGRhc2hlZCAjNzk3OTc5OwogIGN1cnNvcjogcG9pbnRlcjsKICBib3JkZXItcmFkaXVzOiA2cHg7CiAgY29sb3I6ICM3OTc5Nzk7CiAgd2lkdGg6IDkwcHg7CiAgZm9udC1zaXplOiAzMnB4OwogIGxpbmUtaGVpZ2h0OiA5MHB4OwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBoZWlnaHQ6IDkwcHg7Cn0KCi5hZGQtdXBkYXRlLXByZXZpZXcgLmVsLXRleHRhcmVhID4+PiAuZWwtdGV4dGFyZWFfX2lubmVyIHsKICBib3JkZXI6IDJweCBzb2xpZCAjNzk3OTc5OwogIGJvcmRlci1yYWRpdXM6IDA7CiAgcGFkZGluZzogMTJweDsKICBib3gtc2hhZG93OiAwIDAgMHB4IHJnYmEoNjQsIDE1OCwgMjU1LCAwLjUpOwogIG91dGxpbmU6IG5vbmU7CiAgY29sb3I6ICMwMDA7CiAgd2lkdGg6IDQwMHB4OwogIGZvbnQtc2l6ZTogMTRweDsKICBoZWlnaHQ6IDEyMHB4Owp9Cg=="},{"version":3,"sources":["add-or-update.vue"],"names":[],"mappings":";AA6yBA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"add-or-update.vue","sourceRoot":"src/views/modules/ranking","sourcesContent":["<template>\r\n    <div class=\"addEdit-block\" style=\"width: 100%\">\r\n      <el-form\r\n        :style=\"{\r\n          padding: '30px',\r\n          boxShadow: '0 0px 0px rgba(64, 158, 255, .3)',\r\n          borderRadius: '6px',\r\n          flexWrap: 'wrap',\r\n          background: '#fff',\r\n          display: 'flex',\r\n          width: '100%',\r\n        }\"\r\n        class=\"add-update-preview\"\r\n        ref=\"ruleForm\"\r\n        :model=\"ruleForm\"\r\n        :rules=\"rules\"\r\n        label-width=\"100px\"\r\n      >\r\n        <template>\r\n          <el-form-item\r\n            :style=\"{ width: '50%', margin: '0 0 20px 0' }\"\r\n            class=\"input\"\r\n            v-if=\"type != 'info'\"\r\n            label=\"名称\"\r\n            prop=\"mingcheng\"\r\n          >\r\n            <el-input\r\n              v-model=\"ruleForm.mingcheng\"\r\n              placeholder=\"名称\"\r\n              clearable\r\n              :readonly=\"ro.mingcheng\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item\r\n            :style=\"{ width: '50%', margin: '0 0 20px 0' }\"\r\n            v-else\r\n            class=\"input\"\r\n            label=\"名称\"\r\n            prop=\"mingcheng\"\r\n          >\r\n            <el-input\r\n              v-model=\"ruleForm.mingcheng\"\r\n              placeholder=\"名称\"\r\n              readonly\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item\r\n            :style=\"{ width: '50%', margin: '0 0 20px 0' }\"\r\n            class=\"date\"\r\n            v-if=\"type != 'info'\"\r\n            label=\"签退时间\"\r\n            prop=\"qiantuishijian\"\r\n          >\r\n            <el-date-picker\r\n              value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n              v-model=\"ruleForm.qiantuishijian\"\r\n              type=\"datetime\"\r\n              :readonly=\"ro.qiantuishijian\"\r\n              placeholder=\"签退时间\"\r\n            ></el-date-picker>\r\n          </el-form-item>\r\n          <el-form-item\r\n            :style=\"{ width: '50%', margin: '0 0 20px 0' }\"\r\n            class=\"input\"\r\n            v-else-if=\"ruleForm.qiantuishijian\"\r\n            label=\"签退时间\"\r\n            prop=\"qiantuishijian\"\r\n          >\r\n            <el-input\r\n              v-model=\"ruleForm.qiantuishijian\"\r\n              placeholder=\"签退时间\"\r\n              readonly\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item\r\n            :style=\"{ width: '50%', margin: '0 0 20px 0' }\"\r\n            class=\"upload\"\r\n            v-else-if=\"ruleForm.renlianshibie\"\r\n            label=\"人脸识别\"\r\n            prop=\"renlianshibie\"\r\n          >\r\n            <img\r\n              v-if=\"ruleForm.renlianshibie.substring(0, 4) == 'http'\"\r\n              class=\"upload-img\"\r\n              style=\"margin-right: 20px\"\r\n              v-bind:key=\"index\"\r\n              :src=\"ruleForm.renlianshibie.split(',')[0]\"\r\n              width=\"100\"\r\n              height=\"100\"\r\n            />\r\n            <img\r\n              v-else\r\n              class=\"upload-img\"\r\n              style=\"margin-right: 20px\"\r\n              v-bind:key=\"index\"\r\n              v-for=\"(item, index) in ruleForm.renlianshibie.split(',')\"\r\n              :src=\"$base.url + item\"\r\n              width=\"100\"\r\n              height=\"100\"\r\n            />\r\n          </el-form-item>\r\n          <el-form-item\r\n            :style=\"{ width: '50%', margin: '0 0 20px 0' }\"\r\n            class=\"input\"\r\n            v-if=\"type != 'info'\"\r\n            label=\"签退备注\"\r\n            prop=\"qiantuibeizhu\"\r\n          >\r\n            <el-input\r\n              v-model=\"ruleForm.qiantuibeizhu\"\r\n              placeholder=\"签到备注\"\r\n              clearable\r\n              :readonly=\"ro.qiantuibeizhu\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item\r\n            :style=\"{ width: '50%', margin: '0 0 20px 0' }\"\r\n            v-else\r\n            class=\"input\"\r\n            label=\"签退备注\"\r\n            prop=\"qiantuibeizhu\"\r\n          >\r\n            <el-input\r\n              v-model=\"ruleForm.qiantuibeizhu\"\r\n              placeholder=\"签退备注\"\r\n              readonly\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item\r\n            :style=\"{ width: '50%', margin: '0 0 20px 0' }\"\r\n            class=\"input\"\r\n            v-if=\"type != 'info'\"\r\n            label=\"学号\"\r\n            prop=\"xuehao\"\r\n          >\r\n            <el-input\r\n              v-model=\"ruleForm.xuehao\"\r\n              placeholder=\"学号\"\r\n              clearable\r\n              :readonly=\"ro.xuehao\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item\r\n            :style=\"{ width: '50%', margin: '0 0 20px 0' }\"\r\n            v-else\r\n            class=\"input\"\r\n            label=\"学号\"\r\n            prop=\"xuehao\"\r\n          >\r\n            <el-input\r\n              v-model=\"ruleForm.xuehao\"\r\n              placeholder=\"学号\"\r\n              readonly\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item\r\n            :style=\"{ width: '50%', margin: '0 0 20px 0' }\"\r\n            class=\"input\"\r\n            v-if=\"type != 'info'\"\r\n            label=\"手机\"\r\n            prop=\"shouji\"\r\n          >\r\n            <el-input\r\n              v-model=\"ruleForm.shouji\"\r\n              placeholder=\"手机\"\r\n              clearable\r\n              :readonly=\"ro.shouji\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item\r\n            :style=\"{ width: '50%', margin: '0 0 20px 0' }\"\r\n            v-else\r\n            class=\"input\"\r\n            label=\"手机\"\r\n            prop=\"shouji\"\r\n          >\r\n            <el-input\r\n              v-model=\"ruleForm.shouji\"\r\n              placeholder=\"手机\"\r\n              readonly\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item\r\n            :style=\"{ width: '50%', margin: '0 0 20px 0' }\"\r\n            class=\"input\"\r\n            v-if=\"type != 'info'\"\r\n            label=\"班级\"\r\n            prop=\"banji\"\r\n          >\r\n            <el-input\r\n              v-model=\"ruleForm.banji\"\r\n              placeholder=\"班级\"\r\n              clearable\r\n              :readonly=\"ro.banji\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item\r\n            :style=\"{ width: '50%', margin: '0 0 20px 0' }\"\r\n            v-else\r\n            class=\"input\"\r\n            label=\"班级\"\r\n            prop=\"banji\"\r\n          >\r\n            <el-input\r\n              v-model=\"ruleForm.banji\"\r\n              placeholder=\"班级\"\r\n              readonly\r\n            ></el-input>\r\n          </el-form-item>\r\n        </template>\r\n        <el-form-item\r\n          :style=\"{ width: '100%', padding: '0', margin: '0' }\"\r\n          class=\"btn\"\r\n        >\r\n          <el-button\r\n            :style=\"{\r\n              border: '0',\r\n              cursor: 'pointer',\r\n              padding: '0',\r\n              margin: '0 20px 0 0',\r\n              outline: 'none',\r\n              color: 'rgba(255, 255, 255, 1)',\r\n              borderRadius: '30px',\r\n              background: '#93C7B3',\r\n              width: '128px',\r\n              lineHeight: '40px',\r\n              fontSize: '14px',\r\n              height: '40px',\r\n            }\"\r\n            v-show=\"!faceMatchFlag\"\r\n            v-if=\"type != 'info'\"\r\n            type=\"primary\"\r\n            class=\"btn-success\"\r\n            @click=\"faceMatchHandle\"\r\n            >签退</el-button\r\n          >\r\n          <el-button\r\n            :style=\"{\r\n              border: '0',\r\n              cursor: 'pointer',\r\n              padding: '0',\r\n              margin: '0 20px 0 0',\r\n              outline: 'none',\r\n              color: 'rgba(255, 255, 255, 1)',\r\n              borderRadius: '30px',\r\n              background: '#93C7B3',\r\n              width: '128px',\r\n              lineHeight: '40px',\r\n              fontSize: '14px',\r\n              height: '40px',\r\n            }\"\r\n            v-show=\"faceMatchFlag\"\r\n            v-if=\"type != 'info'\"\r\n            type=\"primary\"\r\n            class=\"btn-success\"\r\n            @click=\"onSubmit\"\r\n            >提交</el-button\r\n          >\r\n          <el-button\r\n            :style=\"{\r\n              border: '0px solid rgba(64, 158, 255, 1)',\r\n              cursor: 'pointer',\r\n              padding: '0',\r\n              margin: '0',\r\n              outline: 'none',\r\n              color: '#fff',\r\n              borderRadius: '30px',\r\n              background: '#93C7B3',\r\n              width: '128px',\r\n              lineHeight: '40px',\r\n              fontSize: '14px',\r\n              height: '40px',\r\n            }\"\r\n            v-if=\"type != 'info'\"\r\n            class=\"btn-close\"\r\n            @click=\"back()\"\r\n            >取消</el-button\r\n          >\r\n          <el-button\r\n            :style=\"{\r\n              border: '0px solid rgba(64, 158, 255, 1)',\r\n              cursor: 'pointer',\r\n              padding: '0',\r\n              margin: '0',\r\n              outline: 'none',\r\n              color: '#fff',\r\n              borderRadius: '30px',\r\n              background: '#93C7B3',\r\n              width: '128px',\r\n              lineHeight: '40px',\r\n              fontSize: '14px',\r\n              height: '40px',\r\n            }\"\r\n            v-if=\"type == 'info'\"\r\n            class=\"btn-close\"\r\n            @click=\"back()\"\r\n            >返回</el-button\r\n          >\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n  </template>\r\n  <script>\r\n  // 数字，邮件，手机，url，身份证校验\r\n  import {\r\n    isNumber,\r\n    isIntNumer,\r\n    isEmail,\r\n    isPhone,\r\n    isMobile,\r\n    isURL,\r\n    checkIdCard,\r\n  } from \"@/utils/validate\";\r\n  export default {\r\n    data() {\r\n      let self = this;\r\n      var validateIdCard = (rule, value, callback) => {\r\n        if (!value) {\r\n          callback();\r\n        } else if (!checkIdCard(value)) {\r\n          callback(new Error(\"请输入正确的身份证号码\"));\r\n        } else {\r\n          callback();\r\n        }\r\n      };\r\n      var validateUrl = (rule, value, callback) => {\r\n        if (!value) {\r\n          callback();\r\n        } else if (!isURL(value)) {\r\n          callback(new Error(\"请输入正确的URL地址\"));\r\n        } else {\r\n          callback();\r\n        }\r\n      };\r\n      var validateMobile = (rule, value, callback) => {\r\n        if (!value) {\r\n          callback();\r\n        } else if (!isMobile(value)) {\r\n          callback(new Error(\"请输入正确的手机号码\"));\r\n        } else {\r\n          callback();\r\n        }\r\n      };\r\n      var validatePhone = (rule, value, callback) => {\r\n        if (!value) {\r\n          callback();\r\n        } else if (!isPhone(value)) {\r\n          callback(new Error(\"请输入正确的电话号码\"));\r\n        } else {\r\n          callback();\r\n        }\r\n      };\r\n      var validateEmail = (rule, value, callback) => {\r\n        if (!value) {\r\n          callback();\r\n        } else if (!isEmail(value)) {\r\n          callback(new Error(\"请输入正确的邮箱地址\"));\r\n        } else {\r\n          callback();\r\n        }\r\n      };\r\n      var validateNumber = (rule, value, callback) => {\r\n        if (!value) {\r\n          callback();\r\n        } else if (!isNumber(value)) {\r\n          callback(new Error(\"请输入数字\"));\r\n        } else {\r\n          callback();\r\n        }\r\n      };\r\n      var validateIntNumber = (rule, value, callback) => {\r\n        if (!value) {\r\n          callback();\r\n        } else if (!isIntNumer(value)) {\r\n          callback(new Error(\"请输入整数\"));\r\n        } else {\r\n          callback();\r\n        }\r\n      };\r\n      return {\r\n        id: \"\",\r\n        type: \"\",\r\n  \r\n        userface: \"\",\r\n        faceMatchFlag: false,\r\n  \r\n        ro: {\r\n          mingcheng: false,\r\n          qiantuishijian: false,\r\n          qiantuibeizhu: false,\r\n          zuowei: false,\r\n          zixishiid: false,\r\n          xuehao: false,\r\n          shouji: false,\r\n          banji: false,\r\n          shhf: false,\r\n        },\r\n  \r\n        ruleForm: {\r\n          mingcheng: \"\",\r\n          qiantuishijian: \"\",\r\n          qiantuibeizhu: \"\",\r\n          zuowei: \"\",\r\n          zixishiid: \"\",\r\n          xuehao: \"\",\r\n          shouji: \"\",\r\n          banji: \"\",\r\n          shhf: \"\",\r\n        },\r\n  \r\n        rules: {\r\n          mingcheng: [],\r\n          qiantuishijian: [],\r\n          qiantuibeizhu: [],\r\n          zuowei: [],\r\n          zixishiid: [],\r\n          xuehao: [],\r\n          shouji: [{ validator: validateMobile, trigger: \"blur\" }],\r\n          banji: [],\r\n          shhf: [],\r\n        },\r\n      };\r\n    },\r\n    props: [\"parent\"],\r\n    computed: {},\r\n    created() {\r\n      this.ruleForm.qiantuishijian = this.getCurDateTime();\r\n    },\r\n    methods: {\r\n      // 下载\r\n      download(file) {\r\n        window.open(`${file}`);\r\n      },\r\n      // 初始化\r\n      init(id, type) {\r\n        if (id) {\r\n          this.id = id;\r\n          this.type = type;\r\n        }\r\n        if (this.type == \"info\" || this.type == \"else\") {\r\n          this.info(id);\r\n        } else if (this.type == \"logistics\") {\r\n          this.logistics = false;\r\n          this.info(id);\r\n        } else if (this.type == \"cross\") {\r\n          var obj = this.$storage.getObj(\"crossObj\");\r\n          for (var o in obj) {\r\n            if (o == \"mingcheng\") {\r\n              this.ruleForm.mingcheng = obj[o];\r\n              this.ro.mingcheng = true;\r\n              continue;\r\n            }\r\n            if (o == \"qiantuishijian\") {\r\n              this.ruleForm.qiantuishijian = obj[o];\r\n              this.ro.qiantuishijian = true;\r\n              continue;\r\n            }\r\n            if (o == \"renlianshibie\") {\r\n              this.ruleForm.renlianshibie = obj[o];\r\n              this.ro.renlianshibie = true;\r\n              continue;\r\n            }\r\n            if (o == \"qiantuibeizhu\") {\r\n              this.ruleForm.qiantuibeizhu = obj[o];\r\n              this.ro.qiantuibeizhu = true;\r\n              continue;\r\n            }\r\n            if (o == \"zixishiid\") {\r\n              this.ruleForm.zixishiid = obj[o];\r\n              this.ro.zixishiid = true;\r\n              continue;\r\n            }\r\n            if (o == \"zuowei\") {\r\n              this.ruleForm.zuowei = obj[o];\r\n              this.ro.zuowei = true;\r\n              continue;\r\n            }\r\n            if (o == \"xuehao\") {\r\n              this.ruleForm.xuehao = obj[o];\r\n              this.ro.xuehao = true;\r\n              continue;\r\n            }\r\n            if (o == \"shouji\") {\r\n              this.ruleForm.shouji = obj[o];\r\n              this.ro.shouji = true;\r\n              continue;\r\n            }\r\n            if (o == \"banji\") {\r\n              this.ruleForm.banji = obj[o];\r\n              this.ro.banji = true;\r\n              continue;\r\n            }\r\n          }\r\n        }\r\n  \r\n        // 获取用户信息\r\n        this.$http({\r\n          url: `${this.$storage.get(\"sessionTable\")}/session`,\r\n          method: \"get\",\r\n        }).then(({ data }) => {\r\n          if (data && data.code === 0) {\r\n            if (this.$storage.get(\"role\") == \"管理员\") {\r\n              this.faceMatchFlag = true;\r\n            }\r\n            this.userface = data.data.touxiang;\r\n  \r\n            var json = data.data;\r\n            if (\r\n              ((json.xuehao != \"\" && json.xuehao) || json.xuehao == 0) &&\r\n              this.$storage.get(\"role\") != \"管理员\"\r\n            ) {\r\n              this.ruleForm.xuehao = json.xuehao;\r\n              this.ro.xuehao = true;\r\n            }\r\n            if (\r\n              ((json.shouji != \"\" && json.shouji) || json.shouji == 0) &&\r\n              this.$storage.get(\"role\") != \"管理员\"\r\n            ) {\r\n              this.ruleForm.shouji = json.shouji;\r\n              this.ro.shouji = true;\r\n            }\r\n            if (\r\n              ((json.banji != \"\" && json.banji) || json.banji == 0) &&\r\n              this.$storage.get(\"role\") != \"管理员\"\r\n            ) {\r\n              this.ruleForm.banji = json.banji;\r\n              this.ro.banji = true;\r\n            }\r\n          } else {\r\n            this.$message.error(data.msg);\r\n          }\r\n        });\r\n      },\r\n      // 多级联动参数\r\n  \r\n      info(id) {\r\n        this.$http({\r\n          url: `qiantuixinxi/info/${id}`,\r\n          method: \"get\",\r\n        }).then(({ data }) => {\r\n          if (data && data.code === 0) {\r\n            this.ruleForm = data.data;\r\n            //解决前台上传图片后台不显示的问题\r\n            let reg = new RegExp(\"../../../upload\", \"g\"); //g代表全部\r\n          } else {\r\n            this.$message.error(data.msg);\r\n          }\r\n        });\r\n      },\r\n  \r\n      faceMatchHandle() {\r\n        this.faceMatchFlag = true;\r\n        this.$message({\r\n          message: \"签退成功\",\r\n          type: \"success\",\r\n          duration: 1500,\r\n        });\r\n        \r\n      },\r\n  \r\n      // 提交\r\n      onSubmit() {\r\n        var objcross = this.$storage.getObj(\"crossObj\");\r\n        console.log(objcross);\r\n        //更新跨表属性\r\n        var crossuserid;\r\n        var crossrefid;\r\n        var crossoptnum;\r\n        if (this.type == \"cross\") {\r\n          var statusColumnName = this.$storage.get(\"statusColumnName\");\r\n          var statusColumnValue = this.$storage.get(\"statusColumnValue\");\r\n          if (statusColumnName != \"\") {\r\n            var obj = this.$storage.getObj(\"crossObj\");\r\n            if (statusColumnName && !statusColumnName.startsWith(\"[\")) {\r\n              for (var o in obj) {\r\n                if (o == statusColumnName) {\r\n                  obj[o] = statusColumnValue;\r\n                }\r\n              }\r\n              var table = this.$storage.get(\"crossTable\");\r\n              console.log('ss');\r\n              this.$http({\r\n                url: `${table}/update`,\r\n                method: \"post\",\r\n                data: obj,\r\n              }).then(({ data }) => {});\r\n            } else {\r\n              crossuserid = this.$storage.get(\"userid\");\r\n              crossrefid = obj[\"id\"];\r\n              crossoptnum = this.$storage.get(\"statusColumnName\");\r\n              crossoptnum = crossoptnum.replace(/\\[/, \"\").replace(/\\]/, \"\");\r\n            }\r\n          }\r\n        }\r\n        this.$refs[\"ruleForm\"].validate((valid) => {\r\n          if (valid) {\r\n            if (crossrefid && crossuserid) {\r\n              this.ruleForm.crossuserid = crossuserid;\r\n              this.ruleForm.crossrefid = crossrefid;\r\n              let params = {\r\n                page: 1,\r\n                limit: 10,\r\n                crossuserid: this.ruleForm.crossuserid,\r\n                crossrefid: this.ruleForm.crossrefid,\r\n              };\r\n              console.log('sss');\r\n              this.$http({\r\n                url: \"qiantuixinxi/page\",\r\n                method: \"get\",\r\n                params: params,\r\n              }).then(({ data }) => {\r\n                if (data && data.code === 0) {\r\n                  if (data.data.total >= crossoptnum) {\r\n                    this.$message.error(this.$storage.get(\"tips\"));\r\n                    return false;\r\n                  } else {\r\n                    console.log('ssss');\r\n                    this.$http({\r\n                      url: `qiantuixinxi/${\r\n                        !this.ruleForm.id ? \"save\" : \"update\"\r\n                      }`,\r\n                      method: \"post\",\r\n                      data: this.ruleForm,\r\n                    }).then(({ data }) => {\r\n                      if (data && data.code === 0) {\r\n                        this.$message({\r\n                          message: \"操作成功\",\r\n                          type: \"success\",\r\n                          duration: 1500,\r\n                          onClose: () => {\r\n                            this.parent.showFlag = true;\r\n                            this.parent.addOrUpdateFlag = false;\r\n                            this.parent.qiantuixinxiCrossAddOrUpdateFlag = false;\r\n                            this.parent.search();\r\n                            this.parent.contentStyleChange();\r\n                          },\r\n                        });\r\n                      } else {\r\n                        this.$message.error(data.msg);\r\n                      }\r\n                    });\r\n                  }\r\n                } else {\r\n                }\r\n              });\r\n            } else {\r\n              console.log('sssss');\r\n              this.$http({\r\n                url: `qiantuixinxi/${!this.ruleForm.id ? \"save\" : \"update\"}`,\r\n                method: \"post\",\r\n                data: this.ruleForm,\r\n              }).then(({ data }) => {\r\n                if (data && data.code === 0) {\r\n                  this.$message({\r\n                    message: \"操作成功\",\r\n                    type: \"success\",\r\n                    duration: 1500,\r\n                    onClose: () => {\r\n                      this.parent.showFlag = true;\r\n                      this.parent.addOrUpdateFlag = false;\r\n                      this.parent.qiantuixinxiCrossAddOrUpdateFlag = false;\r\n                      this.parent.search();\r\n                      this.parent.contentStyleChange();\r\n                    },\r\n                  });\r\n                } else {\r\n                  this.$message.error(data.msg);\r\n                }\r\n              });\r\n            }\r\n          }\r\n        });\r\n      },\r\n      // 获取uuid\r\n      getUUID() {\r\n        return new Date().getTime();\r\n      },\r\n      // 返回\r\n      back() {\r\n        this.parent.showFlag = true;\r\n        this.parent.addOrUpdateFlag = false;\r\n        this.parent.qiantuixinxiCrossAddOrUpdateFlag = false;\r\n        this.parent.contentStyleChange();\r\n      },\r\n      renlianshibieUploadChange(fileUrls) {\r\n        this.ruleForm.renlianshibie = fileUrls;\r\n      },\r\n    },\r\n  };\r\n  </script>\r\n  <style lang=\"scss\" scoped>\r\n  .amap-wrapper {\r\n    width: 100%;\r\n    height: 500px;\r\n  }\r\n  \r\n  .search-box {\r\n    position: absolute;\r\n  }\r\n  \r\n  .el-date-editor.el-input {\r\n    width: auto;\r\n  }\r\n  \r\n  .add-update-preview .el-form-item >>> .el-form-item__label {\r\n    padding: 0 10px 0 0;\r\n    color: #666;\r\n    font-weight: 500;\r\n    width: 100px;\r\n    font-size: 14px;\r\n    line-height: 40px;\r\n    text-align: right;\r\n  }\r\n  \r\n  .add-update-preview .el-form-item >>> .el-form-item__content {\r\n    margin-left: 100px;\r\n  }\r\n  \r\n  .add-update-preview .el-input >>> .el-input__inner {\r\n    border: 2px solid #797979;\r\n    border-radius: 0;\r\n    padding: 0 12px;\r\n    box-shadow: 0 0 0px rgba(64, 158, 255, 0.5);\r\n    outline: none;\r\n    color: #000;\r\n    width: 400px;\r\n    font-size: 14px;\r\n    height: 40px;\r\n  }\r\n  \r\n  .add-update-preview .el-select >>> .el-input__inner {\r\n    border: 2px solid #797979;\r\n    border-radius: 0;\r\n    padding: 0 10px;\r\n    box-shadow: 0 0 0px rgba(64, 158, 255, 0.5);\r\n    outline: none;\r\n    color: #000;\r\n    width: 200px;\r\n    font-size: 14px;\r\n    height: 40px;\r\n  }\r\n  \r\n  .add-update-preview .el-date-editor >>> .el-input__inner {\r\n    border: 2px solid #797979;\r\n    border-radius: 0;\r\n    padding: 0 10px 0 30px;\r\n    box-shadow: 0 0 0px rgba(64, 158, 255, 0.5);\r\n    outline: none;\r\n    color: #000;\r\n    width: 200px;\r\n    font-size: 14px;\r\n    height: 40px;\r\n  }\r\n  \r\n  .add-update-preview >>> .el-upload--picture-card {\r\n    background: transparent;\r\n    border: 0;\r\n    border-radius: 0;\r\n    width: auto;\r\n    height: auto;\r\n    line-height: initial;\r\n    vertical-align: middle;\r\n  }\r\n  \r\n  .add-update-preview >>> .upload .upload-img {\r\n    border: 1px dashed #797979;\r\n    cursor: pointer;\r\n    border-radius: 6px;\r\n    color: #797979;\r\n    width: 90px;\r\n    font-size: 32px;\r\n    line-height: 90px;\r\n    text-align: center;\r\n    height: 90px;\r\n  }\r\n  \r\n  .add-update-preview >>> .el-upload-list .el-upload-list__item {\r\n    border: 1px dashed #797979;\r\n    cursor: pointer;\r\n    border-radius: 6px;\r\n    color: #797979;\r\n    width: 90px;\r\n    font-size: 32px;\r\n    line-height: 90px;\r\n    text-align: center;\r\n    height: 90px;\r\n  }\r\n  \r\n  .add-update-preview >>> .el-upload .el-icon-plus {\r\n    border: 1px dashed #797979;\r\n    cursor: pointer;\r\n    border-radius: 6px;\r\n    color: #797979;\r\n    width: 90px;\r\n    font-size: 32px;\r\n    line-height: 90px;\r\n    text-align: center;\r\n    height: 90px;\r\n  }\r\n  \r\n  .add-update-preview .el-textarea >>> .el-textarea__inner {\r\n    border: 2px solid #797979;\r\n    border-radius: 0;\r\n    padding: 12px;\r\n    box-shadow: 0 0 0px rgba(64, 158, 255, 0.5);\r\n    outline: none;\r\n    color: #000;\r\n    width: 400px;\r\n    font-size: 14px;\r\n    height: 120px;\r\n  }\r\n  </style>\r\n  "]}]}