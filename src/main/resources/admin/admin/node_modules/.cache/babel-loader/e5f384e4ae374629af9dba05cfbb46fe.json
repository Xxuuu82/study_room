{"remainingRequest":"D:\\3\\软件工程\\项目\\study_room1\\study_room1\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\3\\软件工程\\项目\\study_room1\\study_room1\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\3\\软件工程\\项目\\study_room1\\study_room1\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\3\\软件工程\\项目\\study_room1\\study_room1\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\src\\views\\blacklist.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\3\\软件工程\\项目\\study_room1\\study_room1\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\src\\views\\blacklist.vue","mtime":1765816574000},{"path":"D:\\3\\软件工程\\项目\\study_room1\\study_room1\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\babel.config.js","mtime":1678242320000},{"path":"D:\\3\\软件工程\\项目\\study_room1\\study_room1\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\3\\软件工程\\项目\\study_room1\\study_room1\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\3\\软件工程\\项目\\study_room1\\study_room1\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\3\\软件工程\\项目\\study_room1\\study_room1\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiRDovMy9cdThGNkZcdTRFRjZcdTVERTVcdTdBMEIvXHU5ODc5XHU3NkVFL3N0dWR5X3Jvb20xL3N0dWR5X3Jvb20xL3N0dWR5X3Jvb200L3N0dWR5X3Jvb20vc3JjL21haW4vcmVzb3VyY2VzL2FkbWluL2FkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDovMy9cdThGNkZcdTRFRjZcdTVERTVcdTdBMEIvXHU5ODc5XHU3NkVFL3N0dWR5X3Jvb20xL3N0dWR5X3Jvb20xL3N0dWR5X3Jvb200L3N0dWR5X3Jvb20vc3JjL21haW4vcmVzb3VyY2VzL2FkbWluL2FkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnBhZC1zdGFydC5qcyI7CmltcG9ydCBodHRwIGZyb20gJ0AvdXRpbHMvaHR0cCc7CmltcG9ydCB7IE1lc3NhZ2UsIE1lc3NhZ2VCb3ggfSBmcm9tICdlbGVtZW50LXVpJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0YWJsZURhdGE6IFtdLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgcGFnZU51bTogMSwKICAgICAgcGFnZVNpemU6IDEwLAogICAgICB0b3RhbDogMCwKICAgICAgc2VhcmNoRm9ybTogewogICAgICAgIHh1ZWhhbzogIiIsCiAgICAgICAgc2hpZm91amllY2h1OiAiIgogICAgICB9CiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0QmxhY2tMaXN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDml6XmnJ/moLzlvI/ljJbvvJrpgILphY3lkI7nq6/ov5Tlm57nmoTml7bpl7TmiLPvvIjmr6vnp5LvvIkKICAgIGZvcm1hdERhdGU6IGZ1bmN0aW9uIGZvcm1hdERhdGUodGltZXN0YW1wKSB7CiAgICAgIGlmICghdGltZXN0YW1wKSByZXR1cm4gIi0iOwogICAgICB0cnkgewogICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUodGltZXN0YW1wKTsKICAgICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTsKICAgICAgICB2YXIgbW9udGggPSBTdHJpbmcoZGF0ZS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTsKICAgICAgICB2YXIgZGF5ID0gU3RyaW5nKGRhdGUuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpOwogICAgICAgIHZhciBob3VycyA9IFN0cmluZyhkYXRlLmdldEhvdXJzKCkpLnBhZFN0YXJ0KDIsICcwJyk7CiAgICAgICAgdmFyIG1pbnV0ZXMgPSBTdHJpbmcoZGF0ZS5nZXRNaW51dGVzKCkpLnBhZFN0YXJ0KDIsICcwJyk7CiAgICAgICAgdmFyIHNlY29uZHMgPSBTdHJpbmcoZGF0ZS5nZXRTZWNvbmRzKCkpLnBhZFN0YXJ0KDIsICcwJyk7CiAgICAgICAgcmV0dXJuICIiLmNvbmNhdCh5ZWFyLCAiLSIpLmNvbmNhdChtb250aCwgIi0iKS5jb25jYXQoZGF5LCAiICIpLmNvbmNhdChob3VycywgIjoiKS5jb25jYXQobWludXRlcywgIjoiKS5jb25jYXQoc2Vjb25kcyk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZXR1cm4gIi0iOwogICAgICB9CiAgICB9LAogICAgLy8g6I635Y+W6buR5ZCN5Y2V5YiX6KGo77yI5qC45b+D5L+u5pS577ya6YCC6YWN546w5pyJaHR0cC5qc+eahOi/lOWbnuagvOW8j++8iQogICAgZ2V0QmxhY2tMaXN0OiBmdW5jdGlvbiBnZXRCbGFja0xpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvcigvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgX3JlcyRkYXRhLCBfcmVzJGRhdGEyLCByZXNwb25zZSwgcmVzOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiBodHRwLmdldCgiL2FwaS9oZWltaW5nZGFuL2xpc3QiLCB7CiAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgcGFnZTogX3RoaXMucGFnZU51bSwKICAgICAgICAgICAgICAgICAgc2l6ZTogX3RoaXMucGFnZVNpemUsCiAgICAgICAgICAgICAgICAgIHh1ZWhhbzogX3RoaXMuc2VhcmNoRm9ybS54dWVoYW8sCiAgICAgICAgICAgICAgICAgIHNoaWZvdWppZWNodTogX3RoaXMuc2VhcmNoRm9ybS5zaGlmb3VqaWVjaHUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAvLyAyLiDmoLjlv4Pkv67mlLnvvJrnjrDmnIlodHRwLmpz6L+U5Zue55qE5pivYXhpb3PlrozmlbTlk43lupTlr7nosaHvvIzpnIDlhYjlj5ZyZXNwb25zZS5kYXRhCiAgICAgICAgICAgICAgcmVzID0gcmVzcG9uc2UuZGF0YTsgLy8gMy4g6Kej5p6Q5ZCO56uv6L+U5Zue55qEZGF0Ye+8iHJlcy5kYXRh5omN5piv55yf5q2j55qE5YiX6KGo5pWw5o2u77yJCiAgICAgICAgICAgICAgX3RoaXMudGFibGVEYXRhID0gKChfcmVzJGRhdGEgPSByZXMuZGF0YSkgPT09IG51bGwgfHwgX3JlcyRkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVzJGRhdGEucmVjb3JkcykgfHwgW107CiAgICAgICAgICAgICAgX3RoaXMudG90YWwgPSAoKF9yZXMkZGF0YTIgPSByZXMuZGF0YSkgPT09IG51bGwgfHwgX3JlcyRkYXRhMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JlcyRkYXRhMi50b3RhbCkgfHwgMDsKCiAgICAgICAgICAgICAgLy8g6LCD6K+V55So77ya5omT5Y2w5pWw5o2u77yM5pa55L6/5L2g56Gu6K6k5piv5ZCm6I635Y+W5Yiw77yI5Y+v6YCJ77yJCiAgICAgICAgICAgICAgY29uc29sZS5sb2coIum7keWQjeWNleaVsOaNru+8miIsIF90aGlzLnRhYmxlRGF0YSk7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE3OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMTsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDEpOwogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIuiOt+WPlum7keWQjeWNleWksei0pe+8miIsIF9jb250ZXh0LnQwKTsKICAgICAgICAgICAgICBNZXNzYWdlLmVycm9yKCLojrflj5bpu5HlkI3ljZXliJfooajlpLHotKXvvIzor7fmo4Dmn6XlkI7nq6/mnI3liqHvvIEiKTsKICAgICAgICAgICAgICBfdGhpcy50YWJsZURhdGEgPSBbXTsKICAgICAgICAgICAgICBfdGhpcy50b3RhbCA9IDA7CiAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE3OwogICAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuZmluaXNoKDE3KTsKICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMSwgMTEsIDE3LCAyMF1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8g6Kej6Zmk6buR5ZCN5Y2V77yI5ZCM5qC36YCC6YWN546w5pyJaHR0cC5qc+eahOi/lOWbnuagvOW8j++8iQogICAgamllY2h1QmxhY2tMaXN0OiBmdW5jdGlvbiBqaWVjaHVCbGFja0xpc3Qocm93KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciByZXNwb25zZSwgcmVzOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDA7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBNZXNzYWdlQm94LmNvbmZpcm0oIlx1Nzg2RVx1NUI5QVx1ODk4MVx1ODlFM1x1OTY2NFx1MzAxMCIuY29uY2F0KHJvdy54aW5nbWluZyB8fCByb3cueHVlaGFvLCAiXHUzMDExXHU3Njg0XHU5RUQxXHU1NDBEXHU1MzU1XHU1NDE3XHVGRjFGIiksICLmj5DnpLoiLCB7CiAgICAgICAgICAgICAgICB0eXBlOiAid2FybmluZyIKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gaHR0cC5wb3N0KCIvYXBpL2hlaW1pbmdkYW4vamllY2h1IiwgewogICAgICAgICAgICAgICAgeHVlaGFvOiByb3cueHVlaGFvCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIHJlcyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAwKSB7CiAgICAgICAgICAgICAgICBNZXNzYWdlLnN1Y2Nlc3MoIuino+mZpOm7keWQjeWNleaIkOWKnyIpOwogICAgICAgICAgICAgICAgX3RoaXMyLmdldEJsYWNrTGlzdCgpOyAvLyDliLfmlrDliJfooagKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgTWVzc2FnZS5lcnJvcihyZXMubXNnIHx8ICLop6PpmaTlpLHotKUiKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDEwOwogICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICBpZiAoX2NvbnRleHQyLnQwICE9PSAiY2FuY2VsIikgewogICAgICAgICAgICAgICAgTWVzc2FnZS5lcnJvcigi6Kej6Zmk5aSx6LSl77yM6K+356iN5ZCO6YeN6K+VIik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzAsIDEwXV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyDmkJzntKLkuovku7YKICAgIGhhbmRsZVNlYXJjaDogZnVuY3Rpb24gaGFuZGxlU2VhcmNoKCkgewogICAgICB0aGlzLnBhZ2VOdW0gPSAxOwogICAgICB0aGlzLmdldEJsYWNrTGlzdCgpOwogICAgfSwKICAgIC8vIOWIhumhtS3liIfmjaLmr4/pobXmnaHmlbAKICAgIGhhbmRsZVNpemVDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZVNpemVDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMucGFnZVNpemUgPSB2YWw7CiAgICAgIHRoaXMuZ2V0QmxhY2tMaXN0KCk7CiAgICB9LAogICAgLy8g5YiG6aG1LeWIh+aNoumhteeggQogICAgaGFuZGxlQ3VycmVudENoYW5nZTogZnVuY3Rpb24gaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5wYWdlTnVtID0gdmFsOwogICAgICB0aGlzLmdldEJsYWNrTGlzdCgpOwogICAgfQogIH0KfTs="},{"version":3,"names":["http","Message","MessageBox","data","tableData","loading","pageNum","pageSize","total","searchForm","xuehao","shifoujiechu","mounted","getBlackList","methods","formatDate","timestamp","date","Date","year","getFullYear","month","String","getMonth","padStart","day","getDate","hours","getHours","minutes","getMinutes","seconds","getSeconds","concat","e","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_res$data","_res$data2","response","res","wrap","_callee$","_context","prev","next","get","params","page","size","sent","records","console","log","t0","error","finish","stop","jiechuBlackList","row","_this2","_callee2","_callee2$","_context2","confirm","xingming","type","post","code","success","msg","handleSearch","handleSizeChange","val","handleCurrentChange"],"sources":["src/views/blacklist.vue"],"sourcesContent":["<template>\r\n  <div class=\"blacklist-container\">\r\n    <!-- 黑名单管理卡片 -->\r\n    <el-card class=\"info-card\" shadow=\"hover\">\r\n      <div class=\"card-header\">\r\n        <h2>黑名单管理</h2>\r\n        <el-tag type=\"danger\" size=\"small\">违规累计≥3次自动拉黑</el-tag>\r\n      </div>\r\n\r\n      <!-- 搜索栏 -->\r\n      <div class=\"search-form\">\r\n        <el-form :model=\"searchForm\" inline @submit.prevent=\"handleSearch\">\r\n          <el-form-item label=\"学号\">\r\n            <el-input\r\n              v-model=\"searchForm.xuehao\"\r\n              placeholder=\"请输入学号搜索\"\r\n              clearable\r\n              style=\"width: 200px\"\r\n            />\r\n          </el-form-item>\r\n          <el-form-item label=\"状态\">\r\n            <el-select\r\n              v-model=\"searchForm.shifoujiechu\"\r\n              placeholder=\"请选择状态\"\r\n              clearable\r\n              style=\"width: 150px\"\r\n            >\r\n              <el-option label=\"全部\" value=\"\" />\r\n              <el-option label=\"拉黑中\" value=\"0\" />\r\n              <el-option label=\"已解除\" value=\"1\" />\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"primary\" @click=\"handleSearch\">查询</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n\r\n      <!-- 黑名单列表表格 -->\r\n      <div class=\"table-container\">\r\n        <el-table\r\n          :data=\"tableData\"\r\n          border\r\n          stripe\r\n          v-loading=\"loading\"\r\n          style=\"width: 100%\"\r\n          :empty-text=\"loading ? '加载中...' : '暂无黑名单数据'\"\r\n        >\r\n          <!-- 学号（匹配后端xuehao字段） -->\r\n          <el-table-column prop=\"xuehao\" label=\"学号\" width=\"120\" />\r\n          <!-- 姓名（匹配后端xingming字段） -->\r\n          <el-table-column prop=\"xingming\" label=\"姓名\" width=\"120\" />\r\n          <!-- 累计违规次数（匹配后端驼峰字段totalWeiguiCount） -->\r\n          <el-table-column label=\"累计违规次数\" width=\"120\">\r\n            <template slot-scope=\"scope\">\r\n              <span class=\"count-text\">{{ scope.row.totalWeiguiCount || 0 }}次</span>\r\n            </template>\r\n          </el-table-column>\r\n          <!-- 违规明细（匹配后端驼峰字段） -->\r\n          <el-table-column label=\"违规明细\" min-width=\"200\">\r\n            <template slot-scope=\"scope\">\r\n              <div class=\"detail-item\">教室乱吃乱喝：{{ scope.row.weiguiChifanCount || 0 }}次</div>\r\n              <div class=\"detail-item\">未签到：{{ scope.row.weiguiWeiqiandaoCount || 0 }}次</div>\r\n              <div class=\"detail-item\">大声喧哗：{{ scope.row.weiguiXuanhuaCount || 0 }}次</div>\r\n              <div class=\"detail-item\">随地大小便：{{ scope.row.weiguiSuibiaobianCount || 0 }}次</div>\r\n              <div v-if=\"scope.row.otherWeiguiDesc\" class=\"detail-item\">其他违规：{{ scope.row.otherWeiguiDesc }}</div>\r\n            </template>\r\n          </el-table-column>\r\n          <!-- 拉黑原因（匹配后端heimingdanYuanyin字段） -->\r\n          <el-table-column prop=\"heimingdanYuanyin\" label=\"拉黑原因\" min-width=\"200\" />\r\n          <!-- 加入时间（格式化时间戳） -->\r\n          <el-table-column label=\"加入时间\" width=\"200\">\r\n            <template slot-scope=\"scope\">\r\n              {{ formatDate(scope.row.heimingdanStartTime) }}\r\n            </template>\r\n          </el-table-column>\r\n          <!-- 解除时间（格式化时间戳） -->\r\n          <el-table-column label=\"解除时间\" width=\"200\">\r\n            <template slot-scope=\"scope\">\r\n              <span :class=\"scope.row.shifoujiechu === 0 ? 'plan-text' : 'success-text'\">\r\n                {{ formatDate(scope.row.heimingdanEndTime) }}\r\n                <span v-if=\"scope.row.shifoujiechu === 0\">（计划）</span>\r\n              </span>\r\n            </template>\r\n          </el-table-column>\r\n          <!-- 状态 -->\r\n          <el-table-column label=\"状态\" width=\"100\">\r\n            <template slot-scope=\"scope\">\r\n              <el-tag :type=\"scope.row.shifoujiechu === 0 ? 'danger' : 'success'\">\r\n                {{ scope.row.shifoujiechu === 0 ? '拉黑中' : '已解除' }}\r\n              </el-tag>\r\n            </template>\r\n          </el-table-column>\r\n          <!-- 操作 -->\r\n          <el-table-column label=\"操作\" width=\"120\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button\r\n                type=\"success\"\r\n                size=\"small\"\r\n                @click=\"jiechuBlackList(scope.row)\"\r\n                :disabled=\"scope.row.shifoujiechu === 1\"\r\n              >\r\n                解除\r\n              </el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n\r\n        <!-- 分页组件 -->\r\n        <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"pageNum\"\r\n          :page-sizes=\"[10, 20, 50]\"\r\n          :page-size=\"pageSize\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"total\"\r\n          style=\"margin-top: 20px; text-align: right\"\r\n        />\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport http from '@/utils/http'\r\nimport { Message, MessageBox } from 'element-ui'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      loading: false,\r\n      pageNum: 1,\r\n      pageSize: 10,\r\n      total: 0,\r\n      searchForm: {\r\n        xuehao: \"\",\r\n        shifoujiechu: \"\"\r\n      }\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getBlackList();\r\n  },\r\n  methods: {\r\n    // 日期格式化：适配后端返回的时间戳（毫秒）\r\n    formatDate(timestamp) {\r\n      if (!timestamp) return \"-\";\r\n      try {\r\n        const date = new Date(timestamp);\r\n        const year = date.getFullYear();\r\n        const month = String(date.getMonth() + 1).padStart(2, '0');\r\n        const day = String(date.getDate()).padStart(2, '0');\r\n        const hours = String(date.getHours()).padStart(2, '0');\r\n        const minutes = String(date.getMinutes()).padStart(2, '0');\r\n        const seconds = String(date.getSeconds()).padStart(2, '0');\r\n        return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\r\n      } catch (e) {\r\n        return \"-\";\r\n      }\r\n    },\r\n\r\n    // 获取黑名单列表（核心修改：适配现有http.js的返回格式）\r\n    async getBlackList() {\r\n      this.loading = true;\r\n      try {\r\n        // 1. 发送请求（路径不变，适配现有http.js的baseURL）\r\n        const response = await http.get(\"/api/heimingdan/list\", {\r\n          params: {\r\n            page: this.pageNum,\r\n            size: this.pageSize,\r\n            xuehao: this.searchForm.xuehao,\r\n            shifoujiechu: this.searchForm.shifoujiechu\r\n          }\r\n        });\r\n        // 2. 核心修改：现有http.js返回的是axios完整响应对象，需先取response.data\r\n        const res = response.data;\r\n        // 3. 解析后端返回的data（res.data才是真正的列表数据）\r\n        this.tableData = res.data?.records || [];\r\n        this.total = res.data?.total || 0;\r\n\r\n        // 调试用：打印数据，方便你确认是否获取到（可选）\r\n        console.log(\"黑名单数据：\", this.tableData);\r\n      } catch (error) {\r\n        console.error(\"获取黑名单失败：\", error);\r\n        Message.error(\"获取黑名单列表失败，请检查后端服务！\");\r\n        this.tableData = [];\r\n        this.total = 0;\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n\r\n    // 解除黑名单（同样适配现有http.js的返回格式）\r\n    async jiechuBlackList(row) {\r\n      try {\r\n        await MessageBox.confirm(\r\n          `确定要解除【${row.xingming || row.xuehao}】的黑名单吗？`,\r\n          \"提示\",\r\n          { type: \"warning\" }\r\n        );\r\n        const response = await http.post(\"/api/heimingdan/jiechu\", {\r\n          xuehao: row.xuehao\r\n        });\r\n        const res = response.data;\r\n        if (res.code === 0) {\r\n          Message.success(\"解除黑名单成功\");\r\n          this.getBlackList(); // 刷新列表\r\n        } else {\r\n          Message.error(res.msg || \"解除失败\");\r\n        }\r\n      } catch (error) {\r\n        if (error !== \"cancel\") {\r\n          Message.error(\"解除失败，请稍后重试\");\r\n        }\r\n      }\r\n    },\r\n\r\n    // 搜索事件\r\n    handleSearch() {\r\n      this.pageNum = 1;\r\n      this.getBlackList();\r\n    },\r\n\r\n    // 分页-切换每页条数\r\n    handleSizeChange(val) {\r\n      this.pageSize = val;\r\n      this.getBlackList();\r\n    },\r\n\r\n    // 分页-切换页码\r\n    handleCurrentChange(val) {\r\n      this.pageNum = val;\r\n      this.getBlackList();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.blacklist-container {\r\n  padding: 20px;\r\n  background-color: #f5f7fa;\r\n\r\n  .info-card {\r\n    border-radius: 12px;\r\n    overflow: hidden;\r\n\r\n    .card-header {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      padding: 16px 20px;\r\n      border-bottom: 1px solid #eee;\r\n      background-color: #fff;\r\n\r\n      h2 {\r\n        margin: 0;\r\n        font-size: 18px;\r\n        font-weight: 600;\r\n        color: #333;\r\n      }\r\n    }\r\n\r\n    .search-form {\r\n      padding: 20px;\r\n      background-color: #fff;\r\n      border-bottom: 1px solid #eee;\r\n    }\r\n\r\n    .table-container {\r\n      padding: 20px;\r\n      background-color: #fff;\r\n\r\n      .count-text {\r\n        color: #e6a23c;\r\n        font-weight: 600;\r\n      }\r\n\r\n      .detail-item {\r\n        line-height: 1.8;\r\n        font-size: 13px;\r\n        color: #666;\r\n      }\r\n\r\n      .plan-text {\r\n        color: #999;\r\n      }\r\n\r\n      .success-text {\r\n        color: #67c23a;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.el-form-item {\r\n  margin-bottom: 15px;\r\n\r\n  .el-form-item__label {\r\n    color: #666;\r\n    font-weight: 500;\r\n  }\r\n\r\n  .el-input__inner,\r\n  .el-select__wrapper {\r\n    border-radius: 6px;\r\n    border-color: #dcdfe6;\r\n    transition: all 0.3s;\r\n\r\n    &:focus {\r\n      border-color: #409eff;\r\n      box-shadow: 0 0 0 2px rgba(64, 158, 255, 0.2);\r\n    }\r\n  }\r\n}\r\n\r\n.el-table {\r\n  --el-table-header-text-color: #666;\r\n  --el-table-row-hover-bg-color: #f8f9fa;\r\n\r\n  .el-table__header-wrapper {\r\n    th {\r\n      background-color: #f5f7fa;\r\n      font-weight: 500;\r\n    }\r\n  }\r\n}\r\n\r\n.el-pagination {\r\n  .el-pagination__sizes {\r\n    margin-right: 10px;\r\n  }\r\n\r\n  .el-pager li {\r\n    border-radius: 4px;\r\n    margin: 0 2px;\r\n  }\r\n\r\n  .el-pager li.active {\r\n    background-color: #409eff;\r\n    color: #fff;\r\n  }\r\n}\r\n</style>"],"mappings":";;;;AA6HA,OAAAA,IAAA;AACA,SAAAC,OAAA,EAAAC,UAAA;AAEA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,SAAA;MACAC,OAAA;MACAC,OAAA;MACAC,QAAA;MACAC,KAAA;MACAC,UAAA;QACAC,MAAA;QACAC,YAAA;MACA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAC,YAAA;EACA;EACAC,OAAA;IACA;IACAC,UAAA,WAAAA,WAAAC,SAAA;MACA,KAAAA,SAAA;MACA;QACA,IAAAC,IAAA,OAAAC,IAAA,CAAAF,SAAA;QACA,IAAAG,IAAA,GAAAF,IAAA,CAAAG,WAAA;QACA,IAAAC,KAAA,GAAAC,MAAA,CAAAL,IAAA,CAAAM,QAAA,QAAAC,QAAA;QACA,IAAAC,GAAA,GAAAH,MAAA,CAAAL,IAAA,CAAAS,OAAA,IAAAF,QAAA;QACA,IAAAG,KAAA,GAAAL,MAAA,CAAAL,IAAA,CAAAW,QAAA,IAAAJ,QAAA;QACA,IAAAK,OAAA,GAAAP,MAAA,CAAAL,IAAA,CAAAa,UAAA,IAAAN,QAAA;QACA,IAAAO,OAAA,GAAAT,MAAA,CAAAL,IAAA,CAAAe,UAAA,IAAAR,QAAA;QACA,UAAAS,MAAA,CAAAd,IAAA,OAAAc,MAAA,CAAAZ,KAAA,OAAAY,MAAA,CAAAR,GAAA,OAAAQ,MAAA,CAAAN,KAAA,OAAAM,MAAA,CAAAJ,OAAA,OAAAI,MAAA,CAAAF,OAAA;MACA,SAAAG,CAAA;QACA;MACA;IACA;IAEA;IACArB,YAAA,WAAAA,aAAA;MAAA,IAAAsB,KAAA;MAAA,OAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,SAAA,EAAAC,UAAA,EAAAC,QAAA,EAAAC,GAAA;QAAA,OAAAN,mBAAA,GAAAO,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACAb,KAAA,CAAA9B,OAAA;cAAAyC,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAE,IAAA;cAAA,OAGAhD,IAAA,CAAAiD,GAAA;gBACAC,MAAA;kBACAC,IAAA,EAAAhB,KAAA,CAAA7B,OAAA;kBACA8C,IAAA,EAAAjB,KAAA,CAAA5B,QAAA;kBACAG,MAAA,EAAAyB,KAAA,CAAA1B,UAAA,CAAAC,MAAA;kBACAC,YAAA,EAAAwB,KAAA,CAAA1B,UAAA,CAAAE;gBACA;cACA;YAAA;cAPA+B,QAAA,GAAAI,QAAA,CAAAO,IAAA;cAQA;cACAV,GAAA,GAAAD,QAAA,CAAAvC,IAAA,EACA;cACAgC,KAAA,CAAA/B,SAAA,KAAAoC,SAAA,GAAAG,GAAA,CAAAxC,IAAA,cAAAqC,SAAA,uBAAAA,SAAA,CAAAc,OAAA;cACAnB,KAAA,CAAA3B,KAAA,KAAAiC,UAAA,GAAAE,GAAA,CAAAxC,IAAA,cAAAsC,UAAA,uBAAAA,UAAA,CAAAjC,KAAA;;cAEA;cACA+C,OAAA,CAAAC,GAAA,WAAArB,KAAA,CAAA/B,SAAA;cAAA0C,QAAA,CAAAE,IAAA;cAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAW,EAAA,GAAAX,QAAA;cAEAS,OAAA,CAAAG,KAAA,aAAAZ,QAAA,CAAAW,EAAA;cACAxD,OAAA,CAAAyD,KAAA;cACAvB,KAAA,CAAA/B,SAAA;cACA+B,KAAA,CAAA3B,KAAA;YAAA;cAAAsC,QAAA,CAAAC,IAAA;cAEAZ,KAAA,CAAA9B,OAAA;cAAA,OAAAyC,QAAA,CAAAa,MAAA;YAAA;YAAA;cAAA,OAAAb,QAAA,CAAAc,IAAA;UAAA;QAAA,GAAArB,OAAA;MAAA;IAEA;IAEA;IACAsB,eAAA,WAAAA,gBAAAC,GAAA;MAAA,IAAAC,MAAA;MAAA,OAAA3B,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,UAAA0B,SAAA;QAAA,IAAAtB,QAAA,EAAAC,GAAA;QAAA,OAAAN,mBAAA,GAAAO,IAAA,UAAAqB,UAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAAnB,IAAA,GAAAmB,SAAA,CAAAlB,IAAA;YAAA;cAAAkB,SAAA,CAAAnB,IAAA;cAAAmB,SAAA,CAAAlB,IAAA;cAAA,OAEA9C,UAAA,CAAAiE,OAAA,wCAAAlC,MAAA,CACA6B,GAAA,CAAAM,QAAA,IAAAN,GAAA,CAAApD,MAAA,iDACA,MACA;gBAAA2D,IAAA;cAAA,CACA;YAAA;cAAAH,SAAA,CAAAlB,IAAA;cAAA,OACAhD,IAAA,CAAAsE,IAAA;gBACA5D,MAAA,EAAAoD,GAAA,CAAApD;cACA;YAAA;cAFAgC,QAAA,GAAAwB,SAAA,CAAAb,IAAA;cAGAV,GAAA,GAAAD,QAAA,CAAAvC,IAAA;cACA,IAAAwC,GAAA,CAAA4B,IAAA;gBACAtE,OAAA,CAAAuE,OAAA;gBACAT,MAAA,CAAAlD,YAAA;cACA;gBACAZ,OAAA,CAAAyD,KAAA,CAAAf,GAAA,CAAA8B,GAAA;cACA;cAAAP,SAAA,CAAAlB,IAAA;cAAA;YAAA;cAAAkB,SAAA,CAAAnB,IAAA;cAAAmB,SAAA,CAAAT,EAAA,GAAAS,SAAA;cAEA,IAAAA,SAAA,CAAAT,EAAA;gBACAxD,OAAA,CAAAyD,KAAA;cACA;YAAA;YAAA;cAAA,OAAAQ,SAAA,CAAAN,IAAA;UAAA;QAAA,GAAAI,QAAA;MAAA;IAEA;IAEA;IACAU,YAAA,WAAAA,aAAA;MACA,KAAApE,OAAA;MACA,KAAAO,YAAA;IACA;IAEA;IACA8D,gBAAA,WAAAA,iBAAAC,GAAA;MACA,KAAArE,QAAA,GAAAqE,GAAA;MACA,KAAA/D,YAAA;IACA;IAEA;IACAgE,mBAAA,WAAAA,oBAAAD,GAAA;MACA,KAAAtE,OAAA,GAAAsE,GAAA;MACA,KAAA/D,YAAA;IACA;EACA;AACA","ignoreList":[]}]}