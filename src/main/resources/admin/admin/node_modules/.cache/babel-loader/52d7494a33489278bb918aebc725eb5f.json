{"remainingRequest":"D:\\study_room1\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\study_room1\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\study_room1\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\study_room1\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\src\\views\\blacklist.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\study_room1\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\src\\views\\blacklist.vue","mtime":1765816574000},{"path":"D:\\study_room1\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\babel.config.js","mtime":1678242320000},{"path":"D:\\study_room1\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\study_room1\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\study_room1\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\study_room1\\study_room4\\study_room\\src\\main\\resources\\admin\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiRDovc3R1ZHlfcm9vbTEvc3R1ZHlfcm9vbTQvc3R1ZHlfcm9vbS9zcmMvbWFpbi9yZXNvdXJjZXMvYWRtaW4vYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJEOi9zdHVkeV9yb29tMS9zdHVkeV9yb29tNC9zdHVkeV9yb29tL3NyYy9tYWluL3Jlc291cmNlcy9hZG1pbi9hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5wYWQtc3RhcnQuanMiOwppbXBvcnQgaHR0cCBmcm9tICdAL3V0aWxzL2h0dHAnOwppbXBvcnQgeyBNZXNzYWdlLCBNZXNzYWdlQm94IH0gZnJvbSAnZWxlbWVudC11aSc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHBhZ2VOdW06IDEsCiAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgdG90YWw6IDAsCiAgICAgIHNlYXJjaEZvcm06IHsKICAgICAgICB4dWVoYW86ICIiLAogICAgICAgIHNoaWZvdWppZWNodTogIiIKICAgICAgfQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldEJsYWNrTGlzdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g5pel5pyf5qC85byP5YyW77ya6YCC6YWN5ZCO56uv6L+U5Zue55qE5pe26Ze05oiz77yI5q+r56eS77yJCiAgICBmb3JtYXREYXRlOiBmdW5jdGlvbiBmb3JtYXREYXRlKHRpbWVzdGFtcCkgewogICAgICBpZiAoIXRpbWVzdGFtcCkgcmV0dXJuICItIjsKICAgICAgdHJ5IHsKICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHRpbWVzdGFtcCk7CiAgICAgICAgdmFyIHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7CiAgICAgICAgdmFyIG1vbnRoID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7CiAgICAgICAgdmFyIGRheSA9IFN0cmluZyhkYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTsKICAgICAgICB2YXIgaG91cnMgPSBTdHJpbmcoZGF0ZS5nZXRIb3VycygpKS5wYWRTdGFydCgyLCAnMCcpOwogICAgICAgIHZhciBtaW51dGVzID0gU3RyaW5nKGRhdGUuZ2V0TWludXRlcygpKS5wYWRTdGFydCgyLCAnMCcpOwogICAgICAgIHZhciBzZWNvbmRzID0gU3RyaW5nKGRhdGUuZ2V0U2Vjb25kcygpKS5wYWRTdGFydCgyLCAnMCcpOwogICAgICAgIHJldHVybiAiIi5jb25jYXQoeWVhciwgIi0iKS5jb25jYXQobW9udGgsICItIikuY29uY2F0KGRheSwgIiAiKS5jb25jYXQoaG91cnMsICI6IikuY29uY2F0KG1pbnV0ZXMsICI6IikuY29uY2F0KHNlY29uZHMpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuICItIjsKICAgICAgfQogICAgfSwKICAgIC8vIOiOt+WPlum7keWQjeWNleWIl+ihqO+8iOaguOW/g+S/ruaUue+8mumAgumFjeeOsOaciWh0dHAuanPnmoTov5Tlm57moLzlvI/vvIkKICAgIGdldEJsYWNrTGlzdDogZnVuY3Rpb24gZ2V0QmxhY2tMaXN0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIF9yZXMkZGF0YSwgX3JlcyRkYXRhMiwgcmVzcG9uc2UsIHJlczsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gaHR0cC5nZXQoIi9hcGkvaGVpbWluZ2Rhbi9saXN0IiwgewogICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgIHBhZ2U6IF90aGlzLnBhZ2VOdW0sCiAgICAgICAgICAgICAgICAgIHNpemU6IF90aGlzLnBhZ2VTaXplLAogICAgICAgICAgICAgICAgICB4dWVoYW86IF90aGlzLnNlYXJjaEZvcm0ueHVlaGFvLAogICAgICAgICAgICAgICAgICBzaGlmb3VqaWVjaHU6IF90aGlzLnNlYXJjaEZvcm0uc2hpZm91amllY2h1CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgLy8gMi4g5qC45b+D5L+u5pS577ya546w5pyJaHR0cC5qc+i/lOWbnueahOaYr2F4aW9z5a6M5pW05ZON5bqU5a+56LGh77yM6ZyA5YWI5Y+WcmVzcG9uc2UuZGF0YQogICAgICAgICAgICAgIHJlcyA9IHJlc3BvbnNlLmRhdGE7IC8vIDMuIOino+aekOWQjuerr+i/lOWbnueahGRhdGHvvIhyZXMuZGF0YeaJjeaYr+ecn+ato+eahOWIl+ihqOaVsOaNru+8iQogICAgICAgICAgICAgIF90aGlzLnRhYmxlRGF0YSA9ICgoX3JlcyRkYXRhID0gcmVzLmRhdGEpID09PSBudWxsIHx8IF9yZXMkZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JlcyRkYXRhLnJlY29yZHMpIHx8IFtdOwogICAgICAgICAgICAgIF90aGlzLnRvdGFsID0gKChfcmVzJGRhdGEyID0gcmVzLmRhdGEpID09PSBudWxsIHx8IF9yZXMkZGF0YTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZXMkZGF0YTIudG90YWwpIHx8IDA7CgogICAgICAgICAgICAgIC8vIOiwg+ivleeUqO+8muaJk+WNsOaVsOaNru+8jOaWueS+v+S9oOehruiupOaYr+WQpuiOt+WPluWIsO+8iOWPr+mAie+8iQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCLpu5HlkI3ljZXmlbDmja7vvJoiLCBfdGhpcy50YWJsZURhdGEpOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTE7CiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCLojrflj5bpu5HlkI3ljZXlpLHotKXvvJoiLCBfY29udGV4dC50MCk7CiAgICAgICAgICAgICAgTWVzc2FnZS5lcnJvcigi6I635Y+W6buR5ZCN5Y2V5YiX6KGo5aSx6LSl77yM6K+35qOA5p+l5ZCO56uv5pyN5Yqh77yBIik7CiAgICAgICAgICAgICAgX3RoaXMudGFibGVEYXRhID0gW107CiAgICAgICAgICAgICAgX3RoaXMudG90YWwgPSAwOwogICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxNzsKICAgICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmZpbmlzaCgxNyk7CiAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzEsIDExLCAxNywgMjBdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIOino+mZpOm7keWQjeWNle+8iOWQjOagt+mAgumFjeeOsOaciWh0dHAuanPnmoTov5Tlm57moLzlvI/vvIkKICAgIGppZWNodUJsYWNrTGlzdDogZnVuY3Rpb24gamllY2h1QmxhY2tMaXN0KHJvdykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgcmVzcG9uc2UsIHJlczsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAwOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gTWVzc2FnZUJveC5jb25maXJtKCJcdTc4NkVcdTVCOUFcdTg5ODFcdTg5RTNcdTk2NjRcdTMwMTAiLmNvbmNhdChyb3cueGluZ21pbmcgfHwgcm93Lnh1ZWhhbywgIlx1MzAxMVx1NzY4NFx1OUVEMVx1NTQwRFx1NTM1NVx1NTQxN1x1RkYxRiIpLCAi5o+Q56S6IiwgewogICAgICAgICAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgICAgcmV0dXJuIGh0dHAucG9zdCgiL2FwaS9oZWltaW5nZGFuL2ppZWNodSIsIHsKICAgICAgICAgICAgICAgIHh1ZWhhbzogcm93Lnh1ZWhhbwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICByZXMgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMCkgewogICAgICAgICAgICAgICAgTWVzc2FnZS5zdWNjZXNzKCLop6PpmaTpu5HlkI3ljZXmiJDlip8iKTsKICAgICAgICAgICAgICAgIF90aGlzMi5nZXRCbGFja0xpc3QoKTsgLy8g5Yi35paw5YiX6KGoCiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIE1lc3NhZ2UuZXJyb3IocmVzLm1zZyB8fCAi6Kej6Zmk5aSx6LSlIik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxMDsKICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgaWYgKF9jb250ZXh0Mi50MCAhPT0gImNhbmNlbCIpIHsKICAgICAgICAgICAgICAgIE1lc3NhZ2UuZXJyb3IoIuino+mZpOWksei0pe+8jOivt+eojeWQjumHjeivlSIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgbnVsbCwgW1swLCAxMF1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8g5pCc57Si5LqL5Lu2CiAgICBoYW5kbGVTZWFyY2g6IGZ1bmN0aW9uIGhhbmRsZVNlYXJjaCgpIHsKICAgICAgdGhpcy5wYWdlTnVtID0gMTsKICAgICAgdGhpcy5nZXRCbGFja0xpc3QoKTsKICAgIH0sCiAgICAvLyDliIbpobUt5YiH5o2i5q+P6aG15p2h5pWwCiAgICBoYW5kbGVTaXplQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVTaXplQ2hhbmdlKHZhbCkgewogICAgICB0aGlzLnBhZ2VTaXplID0gdmFsOwogICAgICB0aGlzLmdldEJsYWNrTGlzdCgpOwogICAgfSwKICAgIC8vIOWIhumhtS3liIfmjaLpobXnoIEKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMucGFnZU51bSA9IHZhbDsKICAgICAgdGhpcy5nZXRCbGFja0xpc3QoKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["http","Message","MessageBox","data","tableData","loading","pageNum","pageSize","total","searchForm","xuehao","shifoujiechu","mounted","getBlackList","methods","formatDate","timestamp","date","Date","year","getFullYear","month","String","getMonth","padStart","day","getDate","hours","getHours","minutes","getMinutes","seconds","getSeconds","concat","e","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_res$data","_res$data2","response","res","wrap","_callee$","_context","prev","next","get","params","page","size","sent","records","console","log","t0","error","finish","stop","jiechuBlackList","row","_this2","_callee2","_callee2$","_context2","confirm","xingming","type","post","code","success","msg","handleSearch","handleSizeChange","val","handleCurrentChange"],"sources":["src/views/blacklist.vue"],"sourcesContent":["<template>\r\n  <div class=\"blacklist-container\">\r\n    <!-- 黑名单管理卡片 -->\r\n    <el-card class=\"info-card\" shadow=\"hover\">\r\n      <div class=\"card-header\">\r\n        <h2>黑名单管理</h2>\r\n        <el-tag type=\"danger\" size=\"small\">违规累计≥3次自动拉黑</el-tag>\r\n      </div>\r\n\r\n      <!-- 搜索栏 -->\r\n      <div class=\"search-form\">\r\n        <el-form :model=\"searchForm\" inline @submit.prevent=\"handleSearch\">\r\n          <el-form-item label=\"学号\">\r\n            <el-input\r\n              v-model=\"searchForm.xuehao\"\r\n              placeholder=\"请输入学号搜索\"\r\n              clearable\r\n              style=\"width: 200px\"\r\n            />\r\n          </el-form-item>\r\n          <el-form-item label=\"状态\">\r\n            <el-select\r\n              v-model=\"searchForm.shifoujiechu\"\r\n              placeholder=\"请选择状态\"\r\n              clearable\r\n              style=\"width: 150px\"\r\n            >\r\n              <el-option label=\"全部\" value=\"\" />\r\n              <el-option label=\"拉黑中\" value=\"0\" />\r\n              <el-option label=\"已解除\" value=\"1\" />\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"primary\" @click=\"handleSearch\">查询</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n\r\n      <!-- 黑名单列表表格 -->\r\n      <div class=\"table-container\">\r\n        <el-table\r\n          :data=\"tableData\"\r\n          border\r\n          stripe\r\n          v-loading=\"loading\"\r\n          style=\"width: 100%\"\r\n          :empty-text=\"loading ? '加载中...' : '暂无黑名单数据'\"\r\n        >\r\n          <!-- 学号（匹配后端xuehao字段） -->\r\n          <el-table-column prop=\"xuehao\" label=\"学号\" width=\"120\" />\r\n          <!-- 姓名（匹配后端xingming字段） -->\r\n          <el-table-column prop=\"xingming\" label=\"姓名\" width=\"120\" />\r\n          <!-- 累计违规次数（匹配后端驼峰字段totalWeiguiCount） -->\r\n          <el-table-column label=\"累计违规次数\" width=\"120\">\r\n            <template slot-scope=\"scope\">\r\n              <span class=\"count-text\">{{ scope.row.totalWeiguiCount || 0 }}次</span>\r\n            </template>\r\n          </el-table-column>\r\n          <!-- 违规明细（匹配后端驼峰字段） -->\r\n          <el-table-column label=\"违规明细\" min-width=\"200\">\r\n            <template slot-scope=\"scope\">\r\n              <div class=\"detail-item\">教室乱吃乱喝：{{ scope.row.weiguiChifanCount || 0 }}次</div>\r\n              <div class=\"detail-item\">未签到：{{ scope.row.weiguiWeiqiandaoCount || 0 }}次</div>\r\n              <div class=\"detail-item\">大声喧哗：{{ scope.row.weiguiXuanhuaCount || 0 }}次</div>\r\n              <div class=\"detail-item\">随地大小便：{{ scope.row.weiguiSuibiaobianCount || 0 }}次</div>\r\n              <div v-if=\"scope.row.otherWeiguiDesc\" class=\"detail-item\">其他违规：{{ scope.row.otherWeiguiDesc }}</div>\r\n            </template>\r\n          </el-table-column>\r\n          <!-- 拉黑原因（匹配后端heimingdanYuanyin字段） -->\r\n          <el-table-column prop=\"heimingdanYuanyin\" label=\"拉黑原因\" min-width=\"200\" />\r\n          <!-- 加入时间（格式化时间戳） -->\r\n          <el-table-column label=\"加入时间\" width=\"200\">\r\n            <template slot-scope=\"scope\">\r\n              {{ formatDate(scope.row.heimingdanStartTime) }}\r\n            </template>\r\n          </el-table-column>\r\n          <!-- 解除时间（格式化时间戳） -->\r\n          <el-table-column label=\"解除时间\" width=\"200\">\r\n            <template slot-scope=\"scope\">\r\n              <span :class=\"scope.row.shifoujiechu === 0 ? 'plan-text' : 'success-text'\">\r\n                {{ formatDate(scope.row.heimingdanEndTime) }}\r\n                <span v-if=\"scope.row.shifoujiechu === 0\">（计划）</span>\r\n              </span>\r\n            </template>\r\n          </el-table-column>\r\n          <!-- 状态 -->\r\n          <el-table-column label=\"状态\" width=\"100\">\r\n            <template slot-scope=\"scope\">\r\n              <el-tag :type=\"scope.row.shifoujiechu === 0 ? 'danger' : 'success'\">\r\n                {{ scope.row.shifoujiechu === 0 ? '拉黑中' : '已解除' }}\r\n              </el-tag>\r\n            </template>\r\n          </el-table-column>\r\n          <!-- 操作 -->\r\n          <el-table-column label=\"操作\" width=\"120\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button\r\n                type=\"success\"\r\n                size=\"small\"\r\n                @click=\"jiechuBlackList(scope.row)\"\r\n                :disabled=\"scope.row.shifoujiechu === 1\"\r\n              >\r\n                解除\r\n              </el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n\r\n        <!-- 分页组件 -->\r\n        <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"pageNum\"\r\n          :page-sizes=\"[10, 20, 50]\"\r\n          :page-size=\"pageSize\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"total\"\r\n          style=\"margin-top: 20px; text-align: right\"\r\n        />\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport http from '@/utils/http'\r\nimport { Message, MessageBox } from 'element-ui'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      loading: false,\r\n      pageNum: 1,\r\n      pageSize: 10,\r\n      total: 0,\r\n      searchForm: {\r\n        xuehao: \"\",\r\n        shifoujiechu: \"\"\r\n      }\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getBlackList();\r\n  },\r\n  methods: {\r\n    // 日期格式化：适配后端返回的时间戳（毫秒）\r\n    formatDate(timestamp) {\r\n      if (!timestamp) return \"-\";\r\n      try {\r\n        const date = new Date(timestamp);\r\n        const year = date.getFullYear();\r\n        const month = String(date.getMonth() + 1).padStart(2, '0');\r\n        const day = String(date.getDate()).padStart(2, '0');\r\n        const hours = String(date.getHours()).padStart(2, '0');\r\n        const minutes = String(date.getMinutes()).padStart(2, '0');\r\n        const seconds = String(date.getSeconds()).padStart(2, '0');\r\n        return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\r\n      } catch (e) {\r\n        return \"-\";\r\n      }\r\n    },\r\n\r\n    // 获取黑名单列表（核心修改：适配现有http.js的返回格式）\r\n    async getBlackList() {\r\n      this.loading = true;\r\n      try {\r\n        // 1. 发送请求（路径不变，适配现有http.js的baseURL）\r\n        const response = await http.get(\"/api/heimingdan/list\", {\r\n          params: {\r\n            page: this.pageNum,\r\n            size: this.pageSize,\r\n            xuehao: this.searchForm.xuehao,\r\n            shifoujiechu: this.searchForm.shifoujiechu\r\n          }\r\n        });\r\n        // 2. 核心修改：现有http.js返回的是axios完整响应对象，需先取response.data\r\n        const res = response.data;\r\n        // 3. 解析后端返回的data（res.data才是真正的列表数据）\r\n        this.tableData = res.data?.records || [];\r\n        this.total = res.data?.total || 0;\r\n\r\n        // 调试用：打印数据，方便你确认是否获取到（可选）\r\n        console.log(\"黑名单数据：\", this.tableData);\r\n      } catch (error) {\r\n        console.error(\"获取黑名单失败：\", error);\r\n        Message.error(\"获取黑名单列表失败，请检查后端服务！\");\r\n        this.tableData = [];\r\n        this.total = 0;\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n\r\n    // 解除黑名单（同样适配现有http.js的返回格式）\r\n    async jiechuBlackList(row) {\r\n      try {\r\n        await MessageBox.confirm(\r\n          `确定要解除【${row.xingming || row.xuehao}】的黑名单吗？`,\r\n          \"提示\",\r\n          { type: \"warning\" }\r\n        );\r\n        const response = await http.post(\"/api/heimingdan/jiechu\", {\r\n          xuehao: row.xuehao\r\n        });\r\n        const res = response.data;\r\n        if (res.code === 0) {\r\n          Message.success(\"解除黑名单成功\");\r\n          this.getBlackList(); // 刷新列表\r\n        } else {\r\n          Message.error(res.msg || \"解除失败\");\r\n        }\r\n      } catch (error) {\r\n        if (error !== \"cancel\") {\r\n          Message.error(\"解除失败，请稍后重试\");\r\n        }\r\n      }\r\n    },\r\n\r\n    // 搜索事件\r\n    handleSearch() {\r\n      this.pageNum = 1;\r\n      this.getBlackList();\r\n    },\r\n\r\n    // 分页-切换每页条数\r\n    handleSizeChange(val) {\r\n      this.pageSize = val;\r\n      this.getBlackList();\r\n    },\r\n\r\n    // 分页-切换页码\r\n    handleCurrentChange(val) {\r\n      this.pageNum = val;\r\n      this.getBlackList();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.blacklist-container {\r\n  padding: 20px;\r\n  background-color: #f5f7fa;\r\n\r\n  .info-card {\r\n    border-radius: 12px;\r\n    overflow: hidden;\r\n\r\n    .card-header {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      padding: 16px 20px;\r\n      border-bottom: 1px solid #eee;\r\n      background-color: #fff;\r\n\r\n      h2 {\r\n        margin: 0;\r\n        font-size: 18px;\r\n        font-weight: 600;\r\n        color: #333;\r\n      }\r\n    }\r\n\r\n    .search-form {\r\n      padding: 20px;\r\n      background-color: #fff;\r\n      border-bottom: 1px solid #eee;\r\n    }\r\n\r\n    .table-container {\r\n      padding: 20px;\r\n      background-color: #fff;\r\n\r\n      .count-text {\r\n        color: #e6a23c;\r\n        font-weight: 600;\r\n      }\r\n\r\n      .detail-item {\r\n        line-height: 1.8;\r\n        font-size: 13px;\r\n        color: #666;\r\n      }\r\n\r\n      .plan-text {\r\n        color: #999;\r\n      }\r\n\r\n      .success-text {\r\n        color: #67c23a;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.el-form-item {\r\n  margin-bottom: 15px;\r\n\r\n  .el-form-item__label {\r\n    color: #666;\r\n    font-weight: 500;\r\n  }\r\n\r\n  .el-input__inner,\r\n  .el-select__wrapper {\r\n    border-radius: 6px;\r\n    border-color: #dcdfe6;\r\n    transition: all 0.3s;\r\n\r\n    &:focus {\r\n      border-color: #409eff;\r\n      box-shadow: 0 0 0 2px rgba(64, 158, 255, 0.2);\r\n    }\r\n  }\r\n}\r\n\r\n.el-table {\r\n  --el-table-header-text-color: #666;\r\n  --el-table-row-hover-bg-color: #f8f9fa;\r\n\r\n  .el-table__header-wrapper {\r\n    th {\r\n      background-color: #f5f7fa;\r\n      font-weight: 500;\r\n    }\r\n  }\r\n}\r\n\r\n.el-pagination {\r\n  .el-pagination__sizes {\r\n    margin-right: 10px;\r\n  }\r\n\r\n  .el-pager li {\r\n    border-radius: 4px;\r\n    margin: 0 2px;\r\n  }\r\n\r\n  .el-pager li.active {\r\n    background-color: #409eff;\r\n    color: #fff;\r\n  }\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]}]}