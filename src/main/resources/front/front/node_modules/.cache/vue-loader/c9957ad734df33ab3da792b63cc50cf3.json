{"remainingRequest":"D:\\NBU\\junior\\1\\software engineering\\study_room\\src\\main\\resources\\front\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\NBU\\junior\\1\\software engineering\\study_room\\src\\main\\resources\\front\\front\\src\\pages\\weigui\\shensu.vue?vue&type=style&index=0&id=ccfabb8a&rel=stylesheet%2Fscss&lang=scss&scoped=true&","dependencies":[{"path":"D:\\NBU\\junior\\1\\software engineering\\study_room\\src\\main\\resources\\front\\front\\src\\pages\\weigui\\shensu.vue","mtime":1766216914869},{"path":"D:\\NBU\\junior\\1\\software engineering\\study_room\\src\\main\\resources\\front\\front\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\NBU\\junior\\1\\software engineering\\study_room\\src\\main\\resources\\front\\front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\NBU\\junior\\1\\software engineering\\study_room\\src\\main\\resources\\front\\front\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\NBU\\junior\\1\\software engineering\\study_room\\src\\main\\resources\\front\\front\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1765241852000},{"path":"D:\\NBU\\junior\\1\\software engineering\\study_room\\src\\main\\resources\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\NBU\\junior\\1\\software engineering\\study_room\\src\\main\\resources\\front\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi8qIHJlc3BvbnNpdmUgJiBzdHlsZXMgKHNhbWUgYXMgYmVmb3JlKSAqLw0KQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7DQogIC5hZGQtdXBkYXRlLXByZXZpZXcgLmVsLWZvcm0taXRlbSA+Pj4gLmVsLWZvcm0taXRlbV9fbGFiZWwgew0KICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7DQogICAgdGV4dC1hbGlnbjogbGVmdCAhaW1wb3J0YW50Ow0KICAgIGxpbmUtaGVpZ2h0OiAyNHB4ICFpbXBvcnRhbnQ7DQogICAgcGFkZGluZzogMCAwIDhweCAwICFpbXBvcnRhbnQ7DQogIH0NCiAgLmFkZC11cGRhdGUtcHJldmlldyAuZWwtZm9ybS1pdGVtID4+PiAuZWwtZm9ybS1pdGVtX19jb250ZW50IHsgbWFyZ2luLWxlZnQ6IDAgIWltcG9ydGFudDsgfQ0KICAuaW5mby1pdGVtIHsgZmxleC1kaXJlY3Rpb246IGNvbHVtbiAhaW1wb3J0YW50OyB9DQogIC5pbmZvLWl0ZW0gPiBkaXY6Zmlyc3QtY2hpbGQgeyB3aWR0aDogMTAwJSAhaW1wb3J0YW50OyB0ZXh0LWFsaWduOiBsZWZ0ICFpbXBvcnRhbnQ7IHBhZGRpbmctcmlnaHQ6IDAgIWltcG9ydGFudDsgbWFyZ2luLWJvdHRvbTogNXB4ICFpbXBvcnRhbnQ7IH0NCn0NCi5lbC1kYXRlLWVkaXRvci5lbC1pbnB1dCB7IHdpZHRoOiAxMDAlOyB9DQouYWRkLXVwZGF0ZS1wcmV2aWV3IC5lbC1mb3JtLWl0ZW0gPj4+IC5lbC1mb3JtLWl0ZW1fX2xhYmVsIHsgcGFkZGluZzogMCAxMHB4IDAgMDsgY29sb3I6ICM2NjY7IGZvbnQtd2VpZ2h0OiA1MDA7IHdpZHRoOiAxMjBweDsgZm9udC1zaXplOiAxNHB4OyBsaW5lLWhlaWdodDogNDBweDsgdGV4dC1hbGlnbjogcmlnaHQ7IH0NCi5hZGQtdXBkYXRlLXByZXZpZXcgLmVsLWZvcm0taXRlbSA+Pj4gLmVsLWZvcm0taXRlbV9fY29udGVudCB7IG1hcmdpbi1sZWZ0OiAxMjBweDsgfQ0KLmFkZC11cGRhdGUtcHJldmlldyAuZWwtaW5wdXQgPj4+IC5lbC1pbnB1dF9faW5uZXIsDQouYWRkLXVwZGF0ZS1wcmV2aWV3IC5lbC1zZWxlY3QgPj4+IC5lbC1pbnB1dF9faW5uZXIsDQouYWRkLXVwZGF0ZS1wcmV2aWV3IC5lbC1kYXRlLWVkaXRvciA+Pj4gLmVsLWlucHV0X19pbm5lciB7IGJvcmRlcjogMnB4IHNvbGlkICMyZTYxZTE7IGJvcmRlci1yYWRpdXM6IDRweDsgcGFkZGluZzogMCAxMnB4OyBvdXRsaW5lOiBub25lOyBjb2xvcjogIzAwMDsgYmFja2dyb3VuZDogI2JmZDJmYzsgd2lkdGg6IDEwMCU7IGZvbnQtc2l6ZTogMTRweDsgaGVpZ2h0OiA0MHB4OyBib3gtc2l6aW5nOiBib3JkZXItYm94OyB9DQouYWRkLXVwZGF0ZS1wcmV2aWV3IC5lbC10ZXh0YXJlYSA+Pj4gLmVsLXRleHRhcmVhX19pbm5lciB7IGJvcmRlcjogMnB4IHNvbGlkICMyZTYxZTE7IGJvcmRlci1yYWRpdXM6IDRweDsgcGFkZGluZzogMTJweDsgb3V0bGluZTogbm9uZTsgY29sb3I6ICMwMDA7IGJhY2tncm91bmQ6ICNiZmQyZmM7IHdpZHRoOiAxMDAlOyBmb250LXNpemU6IDE0cHg7IG1pbi1oZWlnaHQ6IDEwMHB4OyBib3gtc2l6aW5nOiBib3JkZXItYm94OyB9DQo6OnYtZGVlcCAuZWwtYnV0dG9uOmhvdmVyIHsgb3BhY2l0eTogMC45OyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTFweCk7IH0NCi5lbC1icmVhZGNydW1iID4+PiAuZWwtYnJlYWRjcnVtYl9fc2VwYXJhdG9yIHsgbWFyZ2luOiAwIDhweDsgY29sb3I6ICM2NjY7IH0NCi5lbC1icmVhZGNydW1iID4+PiAuZWwtYnJlYWRjcnVtYl9faW5uZXIgeyBjb2xvcjogIzMzMzsgY3Vyc29yOiBwb2ludGVyOyB9DQouZWwtYnJlYWRjcnVtYiA+Pj4gLmVsLWJyZWFkY3J1bWJfX2lubmVyOmhvdmVyIHsgY29sb3I6ICMyZTYxZTE7IH0NCi5lbC1icmVhZGNydW1iID4+PiAuZWwtYnJlYWRjcnVtYl9faW5uZXIgYSB7IGNvbG9yOiAjMmU2MWUxOyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IH0NCg=="},{"version":3,"sources":["shensu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8rBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"shensu.vue","sourceRoot":"src/pages/weigui","sourcesContent":["<template>\r\n  <div\r\n      :style=\"{\r\n      width: '100%',\r\n      maxWidth: '1000px',\r\n      padding: '20px',\r\n      boxShadow: '0px 4px 10px 0px rgba(0,0,0,0.302)',\r\n      margin: '10px auto',\r\n      position: 'relative',\r\n      background: '#fff',\r\n      borderRadius: '8px',\r\n      boxSizing: 'border-box'\r\n    }\"\r\n  >\r\n    <!-- 面包屑导航（增加跳转事件） -->\r\n    <div :style=\"{\r\n      marginBottom: '20px',\r\n      paddingBottom: '10px',\r\n      borderBottom: '1px solid #e4e7ed'\r\n    }\">\r\n      <el-breadcrumb :separator=\"'/'\" :style='{\"fontSize\":\"14px\",\"lineHeight\":\"1\",\"color\":\"#333\"}'>\r\n        <el-breadcrumb-item @click=\"$router.push('/index/home')\">首页</el-breadcrumb-item>\r\n        <el-breadcrumb-item @click=\"$router.push('/index/weigui')\">违规记录</el-breadcrumb-item>\r\n        <el-breadcrumb-item>违规申诉</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n    </div>\r\n\r\n    <!-- 违规记录基本信息展示区域 -->\r\n    <div\r\n        :style=\"{\r\n        width: '100%',\r\n        maxWidth: '800px',\r\n        padding: '20px',\r\n        margin: '0 auto 20px',\r\n        background: '#f8f9fa',\r\n        borderRadius: '8px',\r\n        boxShadow: '0 1px 3px rgba(0, 0, 0, .05)'\r\n      }\"\r\n    >\r\n      <h3 :style=\"{\r\n        margin: '0 0 15px 0',\r\n        fontSize: '16px',\r\n        color: '#333',\r\n        fontWeight: '500'\r\n      }\">违规记录信息</h3>\r\n\r\n      <div class=\"info-item\" :style=\"{\r\n        padding: '10px 0',\r\n        display: 'flex',\r\n        borderBottom: '1px dashed #e4e7ed'\r\n      }\">\r\n        <div :style=\"{\r\n          width: '120px',\r\n          textAlign: 'right',\r\n          paddingRight: '15px',\r\n          color: '#666',\r\n          fontSize: '14px'\r\n        }\">违规单号：</div>\r\n        <div :style=\"{\r\n          flex: 1,\r\n          color: '#333',\r\n          fontSize: '14px'\r\n        }\">{{ ruleForm.weiguidanhao || '-' }}</div>\r\n      </div>\r\n\r\n      <div class=\"info-item\" :style=\"{\r\n        padding: '10px 0',\r\n        display: 'flex',\r\n        borderBottom: '1px dashed #e4e7ed'\r\n      }\">\r\n        <div :style=\"{\r\n          width: '120px',\r\n          textAlign: 'right',\r\n          paddingRight: '15px',\r\n          color: '#666',\r\n          fontSize: '14px'\r\n        }\">违规类型：</div>\r\n        <div :style=\"{\r\n          flex: 1,\r\n          color: '#333',\r\n          fontSize: '14px'\r\n        }\">{{ ruleForm.weiguileixing || '-' }}</div>\r\n      </div>\r\n\r\n      <div class=\"info-item\" :style=\"{\r\n        padding: '10px 0',\r\n        display: 'flex',\r\n        borderBottom: '1px dashed #e4e7ed'\r\n      }\">\r\n        <div :style=\"{\r\n          width: '120px',\r\n          textAlign: 'right',\r\n          paddingRight: '15px',\r\n          color: '#666',\r\n          fontSize: '14px'\r\n        }\">违规时间：</div>\r\n        <div :style=\"{\r\n          flex: 1,\r\n          color: '#333',\r\n          fontSize: '14px'\r\n        }\">{{ ruleForm.weiguiTime || '-' }}</div>\r\n      </div>\r\n\r\n      <div class=\"info-item\" :style=\"{\r\n        padding: '10px 0',\r\n        display: 'flex',\r\n        borderBottom: '1px dashed #e4e7ed'\r\n      }\">\r\n        <div :style=\"{\r\n          width: '120px',\r\n          textAlign: 'right',\r\n          paddingRight: '15px',\r\n          color: '#666',\r\n          fontSize: '14px'\r\n        }\">关联预约单号：</div>\r\n        <div :style=\"{\r\n          flex: 1,\r\n          color: '#333',\r\n          fontSize: '14px'\r\n        }\">{{ ruleForm.relatedOrder || '-' }}</div>\r\n      </div>\r\n\r\n      <div class=\"info-item\" :style=\"{\r\n        padding: '10px 0',\r\n        display: 'flex',\r\n        borderBottom: '1px dashed #e4e7ed'\r\n      }\">\r\n        <div :style=\"{\r\n          width: '120px',\r\n          textAlign: 'right',\r\n          paddingRight: '15px',\r\n          color: '#666',\r\n          fontSize: '14px'\r\n        }\">违规原因：</div>\r\n        <div :style=\"{\r\n          flex: 1,\r\n          color: '#333',\r\n          fontSize: '14px',\r\n          whiteSpace: 'pre-wrap'\r\n        }\">{{ ruleForm.weiguiReason || '-' }}</div>\r\n      </div>\r\n\r\n      <div class=\"info-item\" :style=\"{\r\n        padding: '10px 0',\r\n        display: 'flex'\r\n      }\">\r\n        <div :style=\"{\r\n          width: '120px',\r\n          textAlign: 'right',\r\n          paddingRight: '15px',\r\n          color: '#666',\r\n          fontSize: '14px'\r\n        }\">处罚措施：</div>\r\n        <div :style=\"{\r\n          flex: 1,\r\n          color: '#333',\r\n          fontSize: '14px'\r\n        }\">{{ ruleForm.punishment || '-' }}</div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 申诉表单区域 -->\r\n    <el-form\r\n        class=\"add-update-preview\"\r\n        ref=\"ruleForm\"\r\n        :model=\"ruleForm\"\r\n        :rules=\"rules\"\r\n        label-width=\"120px\"\r\n    >\r\n      <!-- 申诉单号 -->\r\n      <el-form-item\r\n          :style=\"{\r\n          width: '100%',\r\n          maxWidth: '800px',\r\n          padding: '10px',\r\n          margin: '0 auto 10px',\r\n          display: 'block',\r\n          boxSizing: 'border-box'\r\n        }\"\r\n          label=\"申诉单号\"\r\n          prop=\"shensudanhao\"\r\n      >\r\n        <el-input\r\n            v-model=\"ruleForm.shensudanhao\"\r\n            placeholder=\"申诉单号\"\r\n            readonly\r\n        ></el-input>\r\n      </el-form-item>\r\n\r\n      <!-- 申诉人学号 -->\r\n      <el-form-item\r\n          :style=\"{\r\n          width: '100%',\r\n          maxWidth: '800px',\r\n          padding: '10px',\r\n          margin: '0 auto 10px',\r\n          display: 'block',\r\n          boxSizing: 'border-box'\r\n        }\"\r\n          label=\"申诉人学号\"\r\n          prop=\"xuehao\"\r\n      >\r\n        <el-input\r\n            v-model=\"ruleForm.xuehao\"\r\n            placeholder=\"申诉人学号\"\r\n            clearable\r\n            :readonly=\"ro.xuehao\"\r\n        ></el-input>\r\n      </el-form-item>\r\n\r\n      <!-- 申诉人姓名 -->\r\n      <el-form-item\r\n          :style=\"{\r\n          width: '100%',\r\n          maxWidth: '800px',\r\n          padding: '10px',\r\n          margin: '0 auto 10px',\r\n          display: 'block',\r\n          boxSizing: 'border-box'\r\n        }\"\r\n          label=\"申诉人姓名\"\r\n          prop=\"xingming\"\r\n      >\r\n        <el-input\r\n            v-model=\"ruleForm.xingming\"\r\n            placeholder=\"申诉人姓名\"\r\n            clearable\r\n            :readonly=\"ro.xingming\"\r\n        ></el-input>\r\n      </el-form-item>\r\n\r\n      <!-- 申诉人手机 -->\r\n      <el-form-item\r\n          :style=\"{\r\n          width: '100%',\r\n          maxWidth: '800px',\r\n          padding: '10px',\r\n          margin: '0 auto 10px',\r\n          display: 'block',\r\n          boxSizing: 'border-box'\r\n        }\"\r\n          label=\"申诉人手机\"\r\n          prop=\"shouji\"\r\n      >\r\n        <el-input\r\n            v-model=\"ruleForm.shouji\"\r\n            placeholder=\"申诉人手机\"\r\n            clearable\r\n            :readonly=\"ro.shouji\"\r\n        ></el-input>\r\n      </el-form-item>\r\n\r\n      <!-- 申诉时间 -->\r\n      <el-form-item\r\n          :style=\"{\r\n          width: '100%',\r\n          maxWidth: '800px',\r\n          padding: '10px',\r\n          margin: '0 auto 10px',\r\n          display: 'block',\r\n          boxSizing: 'border-box'\r\n        }\"\r\n          label=\"申诉时间\"\r\n          prop=\"shensuTime\"\r\n      >\r\n        <el-date-picker\r\n            value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n            v-model=\"ruleForm.shensuTime\"\r\n            type=\"datetime\"\r\n            placeholder=\"选择申诉时间\"\r\n            style=\"width: 100%;\"\r\n            default-time=\"12:00:00\"\r\n        >\r\n        </el-date-picker>\r\n      </el-form-item>\r\n\r\n      <!-- 申诉原因 -->\r\n      <el-form-item\r\n          :style=\"{\r\n          width: '100%',\r\n          maxWidth: '800px',\r\n          padding: '10px',\r\n          margin: '0 auto 10px',\r\n          display: 'block',\r\n          boxSizing: 'border-box'\r\n        }\"\r\n          label=\"申诉原因\"\r\n          prop=\"shensuReason\"\r\n      >\r\n        <el-input\r\n            v-model=\"ruleForm.shensuReason\"\r\n            type=\"textarea\"\r\n            placeholder=\"请详细描述您的申诉原因，说明违规记录存在的问题或异议点\"\r\n            clearable\r\n            :rows=\"8\"\r\n            style=\"width: 100%;\"\r\n        ></el-input>\r\n      </el-form-item>\r\n\r\n      <!-- 申诉诉求 -->\r\n      <el-form-item\r\n          :style=\"{\r\n          width: '100%',\r\n          maxWidth: '800px',\r\n          padding: '10px',\r\n          margin: '0 auto 10px',\r\n          display: 'block',\r\n          boxSizing: 'border-box'\r\n        }\"\r\n          label=\"申诉诉求\"\r\n          prop=\"shensuSuqiu\"\r\n      >\r\n        <el-input\r\n            v-model=\"ruleForm.shensuSuqiu\"\r\n            type=\"textarea\"\r\n            placeholder=\"请说明您的申诉诉求（如：撤销违规记录、减轻处罚等）\"\r\n            clearable\r\n            :rows=\"4\"\r\n            style=\"width: 100%;\"\r\n        ></el-input>\r\n      </el-form-item>\r\n\r\n      <!-- 提交/返回按钮 -->\r\n      <el-form-item :style=\"{\r\n        padding: '20px 0 0',\r\n        margin: '0',\r\n        textAlign: 'center',\r\n        width: '100%'\r\n      }\">\r\n        <el-button\r\n            :style=\"{\r\n            margin: '0 10px 10px',\r\n            padding: '0 24px',\r\n            height: '40px',\r\n            borderRadius: '4px',\r\n            fontSize: '14px',\r\n            background: '#2e61e1',\r\n            color: '#fff',\r\n            border: 'none',\r\n            transition: 'opacity 0.2s'\r\n          }\"\r\n            type=\"primary\"\r\n            @click=\"onSubmit\"\r\n        >提交申诉</el-button\r\n        >\r\n        <el-button\r\n            :style=\"{\r\n            margin: '0 10px 10px',\r\n            padding: '0 24px',\r\n            height: '40px',\r\n            borderRadius: '4px',\r\n            fontSize: '14px',\r\n            background: '#f5f7fa',\r\n            color: '#666',\r\n            border: '1px solid #e4e7ed',\r\n            transition: 'opacity 0.2s'\r\n          }\"\r\n            @click=\"back()\"\r\n        >返回</el-button\r\n        >\r\n        <el-button\r\n            :style=\"{\r\n            margin: '0 10px 10px',\r\n            padding: '0 24px',\r\n            height: '40px',\r\n            borderRadius: '4px',\r\n            fontSize: '14px',\r\n            background: '#6c757d',\r\n            color: '#fff',\r\n            border: 'none',\r\n            transition: 'opacity 0.2s'\r\n          }\"\r\n            @click=\"backToDetail()\"\r\n        >返回违规详情</el-button\r\n        >\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      id: \"\",\r\n      baseUrl: \"\",\r\n      // 只读字段配置\r\n      ro: {\r\n        shensudanhao: false,\r\n        weiguidanhao: true,\r\n        weiguileixing: true,\r\n        weiguiTime: true,\r\n        relatedOrder: true,\r\n        weiguiReason: true,\r\n        punishment: true,\r\n        xuehao: false,\r\n        xingming: false,\r\n        shouji: false,\r\n        shensuTime: false,\r\n        shensuReason: false,\r\n        shensuSuqiu: false,\r\n      },\r\n      userTableName: localStorage.getItem(\"UserTableName\"),\r\n      // 表单数据\r\n      ruleForm: {\r\n        shensudanhao: this.getUUID(), // 自动生成申诉单号\r\n        weiguidanhao: \"\", // 违规单号（关联）\r\n        weiguileixing: \"\", // 违规类型\r\n        weiguiTime: \"\", // 违规时间\r\n        relatedOrder: \"\", // 关联预约单号\r\n        weiguiReason: \"\", // 违规原因\r\n        punishment: \"\", // 处罚措施\r\n        xuehao: \"\", // 申诉人学号\r\n        xingming: \"\", // 申诉人姓名\r\n        shouji: \"\", // 申诉人手机\r\n        shensuTime: \"\", // 申诉时间\r\n        shensuReason: \"\", // 申诉原因\r\n        shensuSuqiu: \"\", // 申诉诉求\r\n        shensuStatus: \"申诉中\", // 申诉状态默认值\r\n        shensuHandleStatus: \"未处理\" // 申诉处理状态默认值\r\n      },\r\n      // 表单校验规则\r\n      rules: {\r\n        shensudanhao: [],\r\n        weiguidanhao: [\r\n          { required: true, message: \"违规单号不能为空\", trigger: \"blur\" }\r\n        ],\r\n        xuehao: [\r\n          { required: true, message: \"申诉人学号不能为空\", trigger: \"blur\" }\r\n        ],\r\n        xingming: [\r\n          { required: true, message: \"申诉人姓名不能为空\", trigger: \"blur\" }\r\n        ],\r\n        shouji: [{ validator: this.validateMobile, trigger: \"blur\" }],\r\n        shensuTime: [\r\n          { required: true, message: \"请选择申诉时间\", trigger: \"change\" },\r\n        ],\r\n        shensuReason: [\r\n          { required: true, message: \"请详细描述申诉原因\", trigger: \"blur\" },\r\n          { min: 20, message: \"申诉原因至少填写20个字\", trigger: \"blur\" }\r\n        ],\r\n        shensuSuqiu: [\r\n          { required: true, message: \"请说明您的申诉诉求\", trigger: \"blur\" }\r\n        ]\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    this.baseUrl = this.$config?.baseUrl || '';\r\n    this.ruleForm.shensuTime = new Date().toISOString().slice(0, 19).replace('T', ' ');\r\n    this.initShensuData();\r\n    this.initUserInfo();\r\n  },\r\n  methods: {\r\n    validateMobile(rule, value, callback) {\r\n      if (!value) { callback(); }\r\n      else {\r\n        const reg = /^1[3-9]\\d{9}$/;\r\n        if (!reg.test(value)) callback(new Error('请输入正确的手机号'));\r\n        else callback();\r\n      }\r\n    },\r\n\r\n    // 初始化申诉数据（从 route.query.id 或 localStorage.currentWeiguiObj）\r\n    async initShensuData() {\r\n      // 优先使用路由传来的 id（推荐在 list 页跳转时使用 this.$router.push({ path: '/index/shensu', query: { id: row.id } })）\r\n      const routeId = this.$route && (this.$route.query.id || this.$route.params.id);\r\n      if (routeId) {\r\n        await this.fetchWeiguiDetail(routeId);\r\n        return;\r\n      }\r\n\r\n      // 否则尝试 localStorage\r\n      const stored = localStorage.getItem(\"currentWeiguiObj\");\r\n      if (stored) {\r\n        try {\r\n          const obj = JSON.parse(stored);\r\n          // If obj contains id, try to fetch remote detail for freshest data\r\n          const id = obj.id || obj.ID;\r\n          if (id) {\r\n            await this.fetchWeiguiDetail(id);\r\n            return;\r\n          }\r\n          // otherwise fill from the stored object\r\n          this.fillRuleFormFromObj(obj);\r\n          return;\r\n        } catch (e) {\r\n          console.warn('localStorage currentWeiguiObj parse error', e);\r\n        }\r\n      }\r\n\r\n      // 没有可用数据\r\n      this.$message.warning(\"未获取到违规记录信息，请选择要申诉的违规记录\");\r\n      setTimeout(() => this.$router.push('/index/weigui'), 1200);\r\n    },\r\n\r\n    // 拉取后端详情（使用 /api/weigui/detail?id=...）\r\n    async fetchWeiguiDetail(id) {\r\n      try {\r\n        console.log('[DEBUG] 正在请求 /api/weigui/detail id=', id);\r\n        const resp = await axios.get('/api/weigui/detail', { params: { id } });\r\n        console.log('[DEBUG] /api/weigui/detail 返回:', resp && resp.data);\r\n\r\n        const data = resp && resp.data;\r\n        // 适配后端 R.ok().put(\"data\", record) 的常见结构：{ code:0, msg:'', data: { ...record... } }\r\n        let record = null;\r\n        if (data) {\r\n          if (data.code === 0 && data.data) {\r\n            record = data.data;\r\n          } else if (data.data && data.data.data) {\r\n            // 有时 R.ok().put(\"data\", record) 会导致额外包装\r\n            record = data.data.data;\r\n          } else if (data.record) {\r\n            record = data.record;\r\n          } else {\r\n            // 最后兜底把整个响应当作记录\r\n            record = data;\r\n          }\r\n        }\r\n\r\n        if (!record || Object.keys(record).length === 0) {\r\n          console.warn('fetchWeiguiDetail: 未在响应中找到 record, 回退到 localStorage');\r\n          const stored = localStorage.getItem(\"currentWeiguiObj\");\r\n          if (stored) {\r\n            try {\r\n              this.fillRuleFormFromObj(JSON.parse(stored));\r\n              return;\r\n            } catch (e) {}\r\n          }\r\n          this.$message.error('未能获取到违规详情');\r\n          setTimeout(() => this.$router.push('/index/weigui'), 1000);\r\n          return;\r\n        }\r\n\r\n        // 填充表单\r\n        this.fillRuleFormFromObj(record);\r\n\r\n        // 保存到 localStorage 便于后续页面使用（可选）\r\n        try { localStorage.setItem(\"currentWeiguiObj\", JSON.stringify(record)); } catch(e){}\r\n\r\n      } catch (err) {\r\n        console.error('fetchWeiguiDetail 出错：', err);\r\n        // 回退到 localStorage\r\n        const stored = localStorage.getItem(\"currentWeiguiObj\");\r\n        if (stored) {\r\n          try {\r\n            this.fillRuleFormFromObj(JSON.parse(stored));\r\n            return;\r\n          } catch (e) {}\r\n        }\r\n        this.$message.error('无法获取违规详情，请稍后重试');\r\n        setTimeout(() => this.$router.push('/index/weigui'), 1200);\r\n      }\r\n    },\r\n\r\n    // 填充表单（兼容多种字段名）\r\n    fillRuleFormFromObj(r) {\r\n      if (!r) return;\r\n      const getField = (...names) => {\r\n        for (const n of names) {\r\n          if (r[n] !== undefined && r[n] !== null && r[n] !== '') return r[n];\r\n        }\r\n        return null;\r\n      };\r\n\r\n      this.ruleForm.weiguidanhao = getField('weiguiDanhao', 'weiguidanhao', 'weigui_danhao') || this.ruleForm.weiguidanhao;\r\n      this.ruleForm.weiguileixing = getField('weiguileixingName', 'weiguileixing', 'weiguiLeixing', 'weiguileixing') || '';\r\n      const rawTime = getField('weiguiShijian', 'weigui_shijian', 'addtime', 'addTime');\r\n      this.ruleForm.weiguiTime = this.formatAnyTime(rawTime) || '';\r\n      this.ruleForm.relatedOrder = getField('relatedOrder', 'zuoWei', 'zuo_wei') || '';\r\n      this.ruleForm.weiguiReason = getField('weiguiBeizhu', 'weigui_beizhu', 'otherWeiguiDesc') || '';\r\n      this.ruleForm.punishment = getField('punishment', 'chufa', 'penalty') || '';\r\n\r\n      // If record contains applicant info, prefill and set readonly\r\n      const recXuehao = getField('xuehao', 'XUEHAO');\r\n      const recXingming = getField('xingming', 'XINGMING', 'name');\r\n      if (recXuehao) { this.ruleForm.xuehao = recXuehao; this.ro.xuehao = true; }\r\n      if (recXingming) { this.ruleForm.xingming = recXingming; this.ro.xingming = true; }\r\n    },\r\n\r\n    initUserInfo() {\r\n      if (!this.userTableName) {\r\n        if (!this.ruleForm.xuehao) this.ruleForm.xuehao = \"20230001\";\r\n        if (!this.ruleForm.xingming) this.ruleForm.xingming = \"张三\";\r\n        if (!this.ruleForm.shouji) this.ruleForm.shouji = \"13800138000\";\r\n        this.ro.xuehao = true; this.ro.xingming = true; this.ro.shouji = true;\r\n        return;\r\n      }\r\n      if (this.$http) {\r\n        this.$http.get(this.userTableName + \"/session\", { emulateJSON: true })\r\n            .then((res) => {\r\n              if (res.data && (res.data.code === 0 || res.data.success === true)) {\r\n                const userInfo = res.data.data || {};\r\n                if (userInfo.xuehao) { this.ruleForm.xuehao = userInfo.xuehao; this.ro.xuehao = true; }\r\n                if (userInfo.xingming) { this.ruleForm.xingming = userInfo.xingming; this.ro.xingming = true; }\r\n                if (userInfo.shouji) { this.ruleForm.shouji = userInfo.shouji; this.ro.shouji = true; }\r\n              }\r\n            })\r\n            .catch(err => {\r\n              console.warn(\"获取用户信息失败：\", err);\r\n            });\r\n      }\r\n    },\r\n\r\n    onSubmit() {\r\n      this.$refs[\"ruleForm\"].validate((valid) => {\r\n        if (valid) {\r\n          const submitData = {\r\n            ...this.ruleForm,\r\n            shensu_time: this.ruleForm.shensuTime,\r\n            shensu_reason: this.ruleForm.shensuReason,\r\n            shensu_suqiu: this.ruleForm.shensuSuqiu,\r\n            weigui_danhao: this.ruleForm.weiguidanhao\r\n          };\r\n\r\n          console.log(\"提交的申诉数据：\", submitData);\r\n\r\n          setTimeout(() => {\r\n            this.$message({\r\n              message: \"申诉提交成功，等待管理员审核处理\",\r\n              type: \"success\",\r\n              duration: 2000,\r\n              onClose: () => { this.$router.push('/index/weigui'); },\r\n            });\r\n\r\n            try {\r\n              const stored = JSON.parse(localStorage.getItem(\"currentWeiguiObj\") || \"{}\");\r\n              if (stored) { stored.shensuStatus = \"已申诉\"; stored.shensuHandleStatus = \"处理中\"; localStorage.setItem(\"currentWeiguiObj\", JSON.stringify(stored)); }\r\n            } catch (e) {}\r\n          }, 1000);\r\n        }\r\n      });\r\n    },\r\n\r\n    getUUID() { return \"SS\" + new Date().getTime(); },\r\n\r\n    back() { this.$router.push('/index/weigui'); },\r\n\r\n    backToDetail() {\r\n      const weiguiObj = JSON.parse(localStorage.getItem(\"currentWeiguiObj\") || \"{}\");\r\n      if (weiguiObj && (weiguiObj.weiguidanhao || weiguiObj.id)) {\r\n        this.$router.push('/index/weiguiDetail');\r\n      } else {\r\n        this.$message.warning(\"未获取到违规记录信息，将返回违规列表\");\r\n        setTimeout(() => this.$router.push('/index/weigui'), 1000);\r\n      }\r\n    },\r\n\r\n    // 时间相关工具\r\n    formatAnyTime(val) {\r\n      if (!val && val !== 0) return '';\r\n      if (Array.isArray(val)) {\r\n        const arr = val.map(v => String(v).padStart(2, '0'));\r\n        if (arr.length >= 6) return `${arr[0]}-${arr[1]}-${arr[2]} ${arr[3]}:${arr[4]}:${arr[5]}`;\r\n        return arr.join('-');\r\n      }\r\n      if (typeof val === 'number') {\r\n        if (String(val).length === 10) return new Date(val * 1000).toISOString().replace('T',' ').slice(0,19);\r\n        return new Date(val).toISOString().replace('T',' ').slice(0,19);\r\n      }\r\n      if (val instanceof Object && !(val instanceof Date)) {\r\n        try { const asStr = String(val); if (asStr && asStr.indexOf('[') === 0) return asStr; return asStr; } catch (e) {}\r\n      }\r\n      try {\r\n        const s = String(val).trim();\r\n        if (/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/.test(s)) return s.replace('T',' ').slice(0,19);\r\n        return s;\r\n      } catch (e) { return String(val); }\r\n    },\r\n\r\n    parseDateStr(str) {\r\n      if (!str && str !== 0) return null;\r\n      if (str instanceof Date) return str;\r\n      if (typeof str === 'number') return new Date(str);\r\n      if (Array.isArray(str)) {\r\n        const arr = str.map(n => Number(n));\r\n        if (arr.length >= 6) return new Date(arr[0], arr[1] - 1, arr[2], arr[3], arr[4], arr[5]);\r\n        return null;\r\n      }\r\n      let s = String(str).trim();\r\n      if (/^\\d{10}$/.test(s)) return new Date(Number(s) * 1000);\r\n      if (/^\\d{13}$/.test(s)) return new Date(Number(s));\r\n      if (/^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}$/.test(s)) s = s.replace(' ', 'T');\r\n      if (/^\\d{4}\\/\\d{2}\\/\\d{2} \\d{2}:\\d{2}:\\d{2}$/.test(s)) s = s.replace(' ', 'T').replace(/\\//g, '-');\r\n      const d = new Date(s);\r\n      if (isNaN(d.getTime())) return null;\r\n      return d;\r\n    },\r\n\r\n    formatEndTime(endDate) {\r\n      const d = endDate instanceof Date ? endDate : new Date(endDate);\r\n      if (isNaN(d.getTime())) return '';\r\n      const pad = (n) => (n < 10 ? '0' + n : '' + n);\r\n      return `${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())} ${pad(d.getHours())}:${pad(d.getMinutes())}:${pad(d.getSeconds())}`;\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\r\n/* responsive & styles (same as before) */\r\n@media (max-width: 768px) {\r\n  .add-update-preview .el-form-item >>> .el-form-item__label {\r\n    width: 100% !important;\r\n    text-align: left !important;\r\n    line-height: 24px !important;\r\n    padding: 0 0 8px 0 !important;\r\n  }\r\n  .add-update-preview .el-form-item >>> .el-form-item__content { margin-left: 0 !important; }\r\n  .info-item { flex-direction: column !important; }\r\n  .info-item > div:first-child { width: 100% !important; text-align: left !important; padding-right: 0 !important; margin-bottom: 5px !important; }\r\n}\r\n.el-date-editor.el-input { width: 100%; }\r\n.add-update-preview .el-form-item >>> .el-form-item__label { padding: 0 10px 0 0; color: #666; font-weight: 500; width: 120px; font-size: 14px; line-height: 40px; text-align: right; }\r\n.add-update-preview .el-form-item >>> .el-form-item__content { margin-left: 120px; }\r\n.add-update-preview .el-input >>> .el-input__inner,\r\n.add-update-preview .el-select >>> .el-input__inner,\r\n.add-update-preview .el-date-editor >>> .el-input__inner { border: 2px solid #2e61e1; border-radius: 4px; padding: 0 12px; outline: none; color: #000; background: #bfd2fc; width: 100%; font-size: 14px; height: 40px; box-sizing: border-box; }\r\n.add-update-preview .el-textarea >>> .el-textarea__inner { border: 2px solid #2e61e1; border-radius: 4px; padding: 12px; outline: none; color: #000; background: #bfd2fc; width: 100%; font-size: 14px; min-height: 100px; box-sizing: border-box; }\r\n::v-deep .el-button:hover { opacity: 0.9; transform: translateY(-1px); }\r\n.el-breadcrumb >>> .el-breadcrumb__separator { margin: 0 8px; color: #666; }\r\n.el-breadcrumb >>> .el-breadcrumb__inner { color: #333; cursor: pointer; }\r\n.el-breadcrumb >>> .el-breadcrumb__inner:hover { color: #2e61e1; }\r\n.el-breadcrumb >>> .el-breadcrumb__inner a { color: #2e61e1; text-decoration: none; }\r\n</style>"]}]}