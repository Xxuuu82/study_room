{"remainingRequest":"D:\\NBU\\junior\\1\\software engineering\\study_room\\src\\main\\resources\\front\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\NBU\\junior\\1\\software engineering\\study_room\\src\\main\\resources\\front\\front\\src\\pages\\register\\register.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\NBU\\junior\\1\\software engineering\\study_room\\src\\main\\resources\\front\\front\\src\\pages\\register\\register.vue","mtime":1765972541980},{"path":"D:\\NBU\\junior\\1\\software engineering\\study_room\\src\\main\\resources\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\NBU\\junior\\1\\software engineering\\study_room\\src\\main\\resources\\front\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\NBU\\junior\\1\\software engineering\\study_room\\src\\main\\resources\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\NBU\\junior\\1\\software engineering\\study_room\\src\\main\\resources\\front\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHBhZ2VGbGFnOiAnJywNCiAgICAgIHRhYmxlTmFtZTogJycsDQogICAgICByZWdpc3RlckZvcm06IHsNCiAgICAgICAgeHVlaGFvOiAnJywNCiAgICAgICAgbWltYTogJycsDQogICAgICAgIG1pbWEyOiAnJywNCiAgICAgICAgeGluZ21pbmc6ICcnLA0KICAgICAgICB4aW5nYmllOiAnJywNCiAgICAgICAgdG91eGlhbmc6ICcnLA0KICAgICAgICBzaG91amk6ICcnLA0KICAgICAgICBiYW5qaTogJycNCiAgICAgIH0sDQogICAgICB4dWVzaGVuZ3hpbmdiaWVPcHRpb25zOiBbJ+eUtycsICflpbMnXSwNCiAgICAgIHJ1bGVzOiB7DQogICAgICAgIHh1ZWhhbzogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXlrablj7cnLCB0cmlnZ2VyOiAnYmx1cicgfQ0KICAgICAgICBdLA0KICAgICAgICBtaW1hOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWvhueggScsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICAgIHsgbWluOiA2LCBtZXNzYWdlOiAn5a+G56CB6ZW/5bqm5LiN6IO95bCR5LqONuS9jScsIHRyaWdnZXI6ICdibHVyJyB9DQogICAgICAgIF0sDQogICAgICAgIG1pbWEyOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+ehruiupOWvhueggScsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICAgIHsgdmFsaWRhdG9yOiAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7DQogICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5yZWdpc3RlckZvcm0ubWltYSkgew0KICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign5Lik5qyh5a+G56CB6L6T5YWl5LiN5LiA6Ie0JykpOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0sIHRyaWdnZXI6ICdibHVyJw0KICAgICAgICAgIH0NCiAgICAgICAgXSwNCiAgICAgICAgeGluZ21pbmc6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5aeT5ZCNJywgdHJpZ2dlcjogJ2JsdXInIH0NCiAgICAgICAgXSwNCiAgICAgICAgc2hvdWppOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgdmFsaWRhdG9yOiAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7DQogICAgICAgICAgICAgIGlmICghdmFsdWUpIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoJ+ivt+i+k+WFpeaJi+acuuWPtycpKTsNCiAgICAgICAgICAgICAgY29uc3QgbW9iaWxlUmVnID0gL14xWzMtOV1cZHs5fSQvOw0KICAgICAgICAgICAgICBpZiAoIW1vYmlsZVJlZy50ZXN0KHZhbHVlKSkgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcign6K+36L6T5YWl5q2j56Gu55qE5omL5py65Y+356CBJykpOw0KICAgICAgICAgICAgICBjYWxsYmFjaygpOw0KICAgICAgICAgICAgfSwgdHJpZ2dlcjogJ2JsdXInIH0NCiAgICAgICAgXQ0KICAgICAgfSwNCiAgICAgIHN1Ym1pdEJ0blN0eWxlOiB7DQogICAgICAgIGJvcmRlcjogJzAnLA0KICAgICAgICBjdXJzb3I6ICdwb2ludGVyJywNCiAgICAgICAgcGFkZGluZzogJzAgMTBweCcsDQogICAgICAgIG91dGxpbmU6ICdub25lJywNCiAgICAgICAgY29sb3I6ICcjZmZmJywNCiAgICAgICAgYm9yZGVyUmFkaXVzOiAnOHB4JywNCiAgICAgICAgYmFja2dyb3VuZDogJyM3OEFCQzMnLA0KICAgICAgICBkaXNwbGF5OiAnYmxvY2snLA0KICAgICAgICB3aWR0aDogJzgwJScsDQogICAgICAgIGZvbnRTaXplOiAnMTZweCcsDQogICAgICAgIGhlaWdodDogJzQ0cHgnDQogICAgICB9LA0KICAgICAgcmVzZXRCdG5TdHlsZTogew0KICAgICAgICBib3JkZXI6ICcwJywNCiAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsDQogICAgICAgIHBhZGRpbmc6ICcwIDEwcHgnLA0KICAgICAgICBvdXRsaW5lOiAnbm9uZScsDQogICAgICAgIGNvbG9yOiAnI2ZmZicsDQogICAgICAgIGJvcmRlclJhZGl1czogJzhweCcsDQogICAgICAgIGJhY2tncm91bmQ6ICcjQjBDOUNGJywNCiAgICAgICAgZGlzcGxheTogJ2Jsb2NrJywNCiAgICAgICAgd2lkdGg6ICc4MCUnLA0KICAgICAgICBmb250U2l6ZTogJzE2cHgnLA0KICAgICAgICBoZWlnaHQ6ICc0NHB4Jw0KICAgICAgfQ0KICAgIH07DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5wYWdlRmxhZyA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnBhZ2VGbGFnIHx8ICdyZWdpc3Rlcic7DQogICAgdGhpcy50YWJsZU5hbWUgPSB0aGlzLiRyb3V0ZS5xdWVyeS5yb2xlIHx8ICd4dWVzaGVuZyc7DQogICAgLy8ga2VlcCBydWxlcyBpbiBkYXRhOyBhbHJlYWR5IGRlZmluZWQNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGdldFVVSUQoKSB7DQogICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7DQogICAgfSwNCiAgICB4dWVzaGVuZ3RvdXhpYW5nVXBsb2FkQ2hhbmdlKGZpbGVVcmxzKSB7DQogICAgICAvLyBmaWxlLXVwbG9hZCDnu4Tku7blj6/og73ov5Tlm57lrozmlbQgVVJM77yM5oiR5Lus5L+d5a2Y5pWw5o2u5bqT55u45a+56Lev5b6E77yI5Y675o6JIGJhc2VVcmzvvIkNCiAgICAgIGlmICghZmlsZVVybHMpIHsNCiAgICAgICAgdGhpcy5yZWdpc3RlckZvcm0udG91eGlhbmcgPSAnJzsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgdGhpcy5yZWdpc3RlckZvcm0udG91eGlhbmcgPSBmaWxlVXJscy5yZXBsYWNlKG5ldyBSZWdFeHAodGhpcy4kY29uZmlnLmJhc2VVcmwsICdnJyksICcnKTsNCiAgICB9LA0KICAgIHN1Ym1pdEZvcm0oZm9ybU5hbWUpIHsNCiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKHZhbGlkID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgLy8g5Lik5qyh5a+G56CB5LiA6Ie05qCh6aqM77yI6KGo5Y2V6aqM6K+B5Lit5Lmf5pyJ77yM5L2G5q2k5aSE5YaN5YGa5LiA5qyh5L+d6Zmp77yJDQogICAgICAgICAgaWYgKHRoaXMucmVnaXN0ZXJGb3JtLm1pbWEgIT09IHRoaXMucmVnaXN0ZXJGb3JtLm1pbWEyKSB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuKTmrKHlr4bnoIHovpPlhaXkuI3kuIDoh7QnKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBjb25zdCB1cmwgPSBgJHt0aGlzLnRhYmxlTmFtZX0vcmVnaXN0ZXJgOw0KDQogICAgICAgICAgLy8g5YWz6ZSu77ya5L2/55SoIGVtdWxhdGVKU09OOnRydWUg5by65Yi25LulIGFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCDlj5HpgIHvvIzpgb/lhY3mnI3liqHlmaggNDE1DQogICAgICAgICAgdGhpcy4kaHR0cC5wb3N0KHVybCwgdGhpcy5yZWdpc3RlckZvcm0sIHsgZW11bGF0ZUpTT046IHRydWUgfSkNCiAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEgJiYgcmVzLmRhdGEuY29kZSA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfms6jlhozmiJDlip8nLA0KICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxNTAwLA0KICAgICAgICAgICAgICAgICAgICBvbkNsb3NlOiAoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgLy8g5ZCO56uv5Y+v6IO96L+U5ZueIDQwMS80MTUv5YW25LuW77yM57uf5LiA5bGV56S65ZCO56uvIG1zZw0KICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMuZGF0YT8ubXNnIHx8ICfms6jlhozlpLHotKUnKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gew0KICAgICAgICAgICAgICAgIC8vIOWmguaenOWQjuerr+i/lOWbniA0MTUg562J6ZSZ6K+v77yM57uZ5Ye65riF5pmw5o+Q56S6DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcign5rOo5YaM6K+35rGC5aSx6LSl77yaJywgZXJyKTsNCiAgICAgICAgICAgICAgICBjb25zdCBzdGF0dXMgPSAoZXJyICYmIGVyci5zdGF0dXMpIHx8IChlcnIgJiYgZXJyLnJlc3BvbnNlICYmIGVyci5yZXNwb25zZS5zdGF0dXMpIHx8IG51bGw7DQogICAgICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gNDE1KSB7DQogICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7fmsYLmoLzlvI/kuI3ooqvlkI7nq6/mjqXlj5cgKDQxNSnjgILlt7LlsJ3or5Xku6XooajljZXmoLzlvI/mj5DkuqTvvIzor7fmo4Dmn6XlkI7nq69yZWdpc3RlcuaOpeWPo+aYr+WQpuWFgeiuuCBQT1NUIOihqOWNleaIluaYr+WQpumcgOimgeeZu+W9leOAgicpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSA0MDEpIHsNCiAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+mcgOimgeWFiOeZu+W9leaIluadg+mZkOagoemqjOacqumAmui/h++8iDQwMe+8iScpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfnvZHnu5zor7fmsYLlpLHotKXvvIzor7fmo4Dmn6XlkI7nq6/mnI3liqHmiJbnvZHnu5zov57mjqUnKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0pOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIC8vIOihqOWNlemqjOivgeacqumAmui/h++8jOS8muaYvuekuuWvueW6lOagoemqjOS/oeaBrw0KICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICByZXNldEZvcm0oZm9ybU5hbWUpIHsNCiAgICAgIGlmICh0aGlzLiRyZWZzW2Zvcm1OYW1lXSkgdGhpcy4kcmVmc1tmb3JtTmFtZV0ucmVzZXRGaWVsZHMoKTsNCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"register.vue","sourceRoot":"src/pages/register","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"container\" :style=\"{\r\n        minHeight: '100vh',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        background: '#f3f7fa',\r\n        width: '100%'\r\n      }\">\r\n      <el-form class=\"rgs-form\" v-if=\"pageFlag === 'register'\"\r\n               :style=\"{\r\n                 padding: '20px',\r\n                 boxShadow: '0px 4px 10px 0px rgba(0,0,0,0.302)',\r\n                 borderRadius: '10px',\r\n                 background: '#fff',\r\n                 width: '420px',\r\n                 height: 'auto'\r\n               }\"\r\n               ref=\"registerForm\"\r\n               :model=\"registerForm\"\r\n               :rules=\"rules\"\r\n               label-position=\"top\"\r\n      >\r\n        <!-- 标题 -->\r\n        <div :style=\"{\r\n            width: '100%',\r\n            margin: '0 0 16px 0',\r\n            lineHeight: '44px',\r\n            fontSize: '20px',\r\n            color: '#000',\r\n            textAlign: 'center',\r\n            fontWeight: '700'\r\n          }\">智慧自习室预约系统 注册</div>\r\n\r\n        <!-- 学号 -->\r\n        <el-form-item prop=\"xuehao\" label=\"学号\">\r\n          <el-input v-model=\"registerForm.xuehao\" placeholder=\"请输入学号\"></el-input>\r\n        </el-form-item>\r\n\r\n        <!-- 密码 -->\r\n        <el-form-item prop=\"mima\" label=\"密码\">\r\n          <el-input v-model=\"registerForm.mima\" type=\"password\" placeholder=\"请输入密码\"></el-input>\r\n        </el-form-item>\r\n\r\n        <!-- 确认密码 -->\r\n        <el-form-item prop=\"mima2\" label=\"确认密码\">\r\n          <el-input v-model=\"registerForm.mima2\" type=\"password\" placeholder=\"请再次输入密码\"></el-input>\r\n        </el-form-item>\r\n\r\n        <!-- 姓名 -->\r\n        <el-form-item prop=\"xingming\" label=\"姓名\">\r\n          <el-input v-model=\"registerForm.xingming\" placeholder=\"请输入姓名\"></el-input>\r\n        </el-form-item>\r\n\r\n        <!-- 性别 -->\r\n        <el-form-item prop=\"xingbie\" label=\"性别\">\r\n          <el-select v-model=\"registerForm.xingbie\" placeholder=\"请选择性别\">\r\n            <el-option v-for=\"(item, index) in xueshengxingbieOptions\" :key=\"index\" :label=\"item\" :value=\"item\" />\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <!-- 头像上传（复用项目已有 file-upload 组件） -->\r\n        <el-form-item prop=\"touxiang\" label=\"头像\">\r\n          <file-upload\r\n              tip=\"点击上传头像\"\r\n              action=\"file/upload\"\r\n              :limit=\"1\"\r\n              :multiple=\"false\"\r\n              :fileUrls=\"registerForm.touxiang ? registerForm.touxiang : ''\"\r\n              @change=\"xueshengtouxiangUploadChange\"\r\n          ></file-upload>\r\n        </el-form-item>\r\n\r\n        <!-- 手机 -->\r\n        <el-form-item prop=\"shouji\" label=\"手机\">\r\n          <el-input v-model=\"registerForm.shouji\" placeholder=\"请输入手机\"></el-input>\r\n        </el-form-item>\r\n\r\n        <!-- 班级 -->\r\n        <el-form-item prop=\"banji\" label=\"班级\">\r\n          <el-input v-model=\"registerForm.banji\" placeholder=\"请输入班级\"></el-input>\r\n        </el-form-item>\r\n\r\n        <!-- 按钮组 -->\r\n        <div style=\"width:100%; display:flex; flex-direction:column; align-items:center; gap:12px; margin-top:12px;\">\r\n          <el-button type=\"primary\" :style=\"submitBtnStyle\" @click=\"submitForm('registerForm')\">注册</el-button>\r\n          <el-button type=\"default\" :style=\"resetBtnStyle\" @click=\"resetForm('registerForm')\">重置</el-button>\r\n          <router-link :to=\"{ path: '/login' }\" style=\"color:#999; margin-top:8px; display:block;\">已有账户登录</router-link>\r\n        </div>\r\n      </el-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      pageFlag: '',\r\n      tableName: '',\r\n      registerForm: {\r\n        xuehao: '',\r\n        mima: '',\r\n        mima2: '',\r\n        xingming: '',\r\n        xingbie: '',\r\n        touxiang: '',\r\n        shouji: '',\r\n        banji: ''\r\n      },\r\n      xueshengxingbieOptions: ['男', '女'],\r\n      rules: {\r\n        xuehao: [\r\n          { required: true, message: '请输入学号', trigger: 'blur' }\r\n        ],\r\n        mima: [\r\n          { required: true, message: '请输入密码', trigger: 'blur' },\r\n          { min: 6, message: '密码长度不能少于6位', trigger: 'blur' }\r\n        ],\r\n        mima2: [\r\n          { required: true, message: '请确认密码', trigger: 'blur' },\r\n          { validator: (rule, value, callback) => {\r\n              if (value !== this.registerForm.mima) {\r\n                callback(new Error('两次密码输入不一致'));\r\n              } else {\r\n                callback();\r\n              }\r\n            }, trigger: 'blur'\r\n          }\r\n        ],\r\n        xingming: [\r\n          { required: true, message: '请输入姓名', trigger: 'blur' }\r\n        ],\r\n        shouji: [\r\n          { required: true, validator: (rule, value, callback) => {\r\n              if (!value) return callback(new Error('请输入手机号'));\r\n              const mobileReg = /^1[3-9]\\d{9}$/;\r\n              if (!mobileReg.test(value)) return callback(new Error('请输入正确的手机号码'));\r\n              callback();\r\n            }, trigger: 'blur' }\r\n        ]\r\n      },\r\n      submitBtnStyle: {\r\n        border: '0',\r\n        cursor: 'pointer',\r\n        padding: '0 10px',\r\n        outline: 'none',\r\n        color: '#fff',\r\n        borderRadius: '8px',\r\n        background: '#78ABC3',\r\n        display: 'block',\r\n        width: '80%',\r\n        fontSize: '16px',\r\n        height: '44px'\r\n      },\r\n      resetBtnStyle: {\r\n        border: '0',\r\n        cursor: 'pointer',\r\n        padding: '0 10px',\r\n        outline: 'none',\r\n        color: '#fff',\r\n        borderRadius: '8px',\r\n        background: '#B0C9CF',\r\n        display: 'block',\r\n        width: '80%',\r\n        fontSize: '16px',\r\n        height: '44px'\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    this.pageFlag = this.$route.query.pageFlag || 'register';\r\n    this.tableName = this.$route.query.role || 'xuesheng';\r\n    // keep rules in data; already defined\r\n  },\r\n  methods: {\r\n    getUUID() {\r\n      return new Date().getTime();\r\n    },\r\n    xueshengtouxiangUploadChange(fileUrls) {\r\n      // file-upload 组件可能返回完整 URL，我们保存数据库相对路径（去掉 baseUrl）\r\n      if (!fileUrls) {\r\n        this.registerForm.touxiang = '';\r\n        return;\r\n      }\r\n      this.registerForm.touxiang = fileUrls.replace(new RegExp(this.$config.baseUrl, 'g'), '');\r\n    },\r\n    submitForm(formName) {\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          // 两次密码一致校验（表单验证中也有，但此处再做一次保险）\r\n          if (this.registerForm.mima !== this.registerForm.mima2) {\r\n            this.$message.error('两次密码输入不一致');\r\n            return;\r\n          }\r\n\r\n          const url = `${this.tableName}/register`;\r\n\r\n          // 关键：使用 emulateJSON:true 强制以 application/x-www-form-urlencoded 发送，避免服务器 415\r\n          this.$http.post(url, this.registerForm, { emulateJSON: true })\r\n              .then(res => {\r\n                if (res.data && res.data.code === 0) {\r\n                  this.$message({\r\n                    message: '注册成功',\r\n                    type: 'success',\r\n                    duration: 1500,\r\n                    onClose: () => {\r\n                      this.$router.push('/login');\r\n                    }\r\n                  });\r\n                } else {\r\n                  // 后端可能返回 401/415/其他，统一展示后端 msg\r\n                  this.$message.error(res.data?.msg || '注册失败');\r\n                }\r\n              })\r\n              .catch(err => {\r\n                // 如果后端返回 415 等错误，给出清晰提示\r\n                console.error('注册请求失败：', err);\r\n                const status = (err && err.status) || (err && err.response && err.response.status) || null;\r\n                if (status === 415) {\r\n                  this.$message.error('请求格式不被后端接受 (415)。已尝试以表单格式提交，请检查后端register接口是否允许 POST 表单或是否需要登录。');\r\n                } else if (status === 401) {\r\n                  this.$message.error('需要先登录或权限校验未通过（401）');\r\n                } else {\r\n                  this.$message.error('网络请求失败，请检查后端服务或网络连接');\r\n                }\r\n              });\r\n        } else {\r\n          // 表单验证未通过，会显示对应校验信息\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    resetForm(formName) {\r\n      if (this.$refs[formName]) this.$refs[formName].resetFields();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\r\n.container {\r\n  .el-date-editor.el-input {\r\n    width: 100%;\r\n  }\r\n\r\n  .rgs-form .el-input >>> .el-input__inner {\r\n    border: 0;\r\n    border-radius: 8px;\r\n    padding: 0 10px;\r\n    outline: none;\r\n    color: #000;\r\n    background: #F9F9F9;\r\n    width: 100%;\r\n    font-size: 14px;\r\n    height: 44px;\r\n  }\r\n\r\n  .rgs-form .el-select >>> .el-input__inner {\r\n    border: 0;\r\n    border-radius: 8px;\r\n    padding: 0 10px;\r\n    outline: none;\r\n    color: #000;\r\n    background: #F9F9F9;\r\n    width: 100%;\r\n    font-size: 14px;\r\n    height: 44px;\r\n  }\r\n\r\n  .rgs-form .el-date-editor >>> .el-input__inner {\r\n    border: 0;\r\n    border-radius: 8px;\r\n    padding: 0 10px 0 30px;\r\n    outline: none;\r\n    color: #000;\r\n    background: #F9F9F9;\r\n    width: 100%;\r\n    font-size: 14px;\r\n    height: 44px;\r\n  }\r\n\r\n  .rgs-form >>> .el-upload--picture-card {\r\n    background: transparent;\r\n    border: 0;\r\n    border-radius: 0;\r\n    width: auto;\r\n    height: auto;\r\n    line-height: initial;\r\n    vertical-align: middle;\r\n  }\r\n\r\n  /* required 标识：Element UI 在必填时会给 el-form-item 加 is-required 类，下面让标签显示红星 */\r\n  .el-form-item.is-required .el-form-item__label::after {\r\n    content: \" *\";\r\n    color: #f56c6c;\r\n    margin-left: 4px;\r\n  }\r\n\r\n  .rgs-form >>> .upload .upload-img {\r\n    border: 1px dashed #888;\r\n    cursor: pointer;\r\n    border-radius: 8px;\r\n    color: #888;\r\n    width: 100px;\r\n    font-size: 32px;\r\n    line-height: 100px;\r\n    text-align: center;\r\n    height: 100px;\r\n  }\r\n\r\n  .rgs-form >>> .el-upload-list .el-upload-list__item {\r\n    border: 1px dashed #888;\r\n    cursor: pointer;\r\n    border-radius: 8px;\r\n    color: #888;\r\n    width: 100px;\r\n    font-size: 32px;\r\n    line-height: 100px;\r\n    text-align: center;\r\n    height: 100px;\r\n  }\r\n\r\n  .rgs-form >>> .el-upload .el-icon-plus {\r\n    border: 1px dashed #888;\r\n    cursor: pointer;\r\n    border-radius: 8px;\r\n    color: #888;\r\n    width: 100px;\r\n    font-size: 32px;\r\n    line-height: 100px;\r\n    text-align: center;\r\n    height: 100px;\r\n  }\r\n}\r\n</style>"]}]}